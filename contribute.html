
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contribute &#8212; ampel-core 0.8.0-alpha.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running the automated tests" href="testing.html" />
    <link rel="prev" title="Porting contrib projects from v0.6" href="legacy.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="testing.html" title="Running the automated tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.8.0-alpha.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Contribute</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="contribute">
<span id="contributing"></span><h1>Contribute<a class="headerlink" href="#contribute" title="Permalink to this headline">¶</a></h1>
<p>To adapt Ampel to your needs by contributing a plugin that provides any combination of the following components:</p>
<ol class="arabic simple">
<li><p>A <em>channel</em>, or set of configurations for existing T0 (filter), T2 (compute), and T3 (react) modules.</p></li>
<li><p>A T0 module implementation.</p></li>
<li><p>A T2 module implementation.</p></li>
<li><p>A T3 module implementation.</p></li>
<li><p>Configuration aliases for use in T0/T2/T3 modules</p></li>
<li><p>Resource definitions for use in T0/T2/T3 modules</p></li>
</ol>
<section id="repository-layout">
<h2>Repository layout<a class="headerlink" href="#repository-layout" title="Permalink to this headline">¶</a></h2>
<p>Each Ampel plugin is kept in a separate <code class="docutils literal notranslate"><span class="pre">git</span></code> repository. These should be named after the institution or working group providing the plugin, e.g. <code class="docutils literal notranslate"><span class="pre">ampel-contrib-hu</span></code> for HU-Berlin, or <code class="docutils literal notranslate"><span class="pre">ampel-contrib-ztfbh</span></code> for the ZTFbh working group. Implementation files should follow a similar naming scheme, e.g. the HU T0 module <code class="docutils literal notranslate"><span class="pre">DecentFilter</span></code> is defined in <code class="docutils literal notranslate"><span class="pre">ampel/contrib/hu/t0/DecentFilter.py</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The template repository <a class="reference external" href="https://github.com/AmpelProject/Ampel-contrib-sample/tree/03950a37dc4dc74c610df72887bd417239cd58aa">Ampel-contrib-sample</a> provides a working example of a plugin.</p>
</div>
<p>At the top level of the repository should be a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file that <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code> will use to install the plugin and register its components. Here is an example of a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file for a plugin imaginatively called <code class="docutils literal notranslate"><span class="pre">ampel-contrib-example</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_namespace_packages</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ampel-contrib-sample&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.7.0&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_namespace_packages</span><span class="p">(),</span>
    <span class="n">package_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;conf&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;*.json&#39;</span><span class="p">,</span> <span class="s1">&#39;**/*.json&#39;</span><span class="p">,</span> <span class="s1">&#39;**/**/*.json&#39;</span><span class="p">,</span>
            <span class="s1">&#39;*.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;**/*.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;**/**/*.yaml&#39;</span><span class="p">,</span>
            <span class="s1">&#39;*.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;**/*.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;**/**/*.yml&#39;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> line provides the name of the plugin. This should match the name of the <code class="docutils literal notranslate"><span class="pre">git</span></code> repo. The <code class="docutils literal notranslate"><span class="pre">version</span></code> line lists the version, and should be incremented appropriately when changes are made to the plugin. The <code class="docutils literal notranslate"><span class="pre">packages</span></code> line specifieds the sub-packages that this plugin provides, and is generated automatically by <code class="xref py py-meth docutils literal notranslate"><span class="pre">find_namespace_packages()</span></code>. The <code class="docutils literal notranslate"><span class="pre">package_data</span></code> line instructs <code class="xref py py-mod docutils literal notranslate"><span class="pre">setuptools</span></code> to install any YAML or JSON files it finds in the <code class="docutils literal notranslate"><span class="pre">conf</span></code> directory of your repository. More on that in <a class="reference internal" href="#contribute-configuration"><span class="std std-ref">Configuration</span></a>.</p>
</section>
<section id="configuration">
<span id="contribute-configuration"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<section id="defining-channels-and-registering-units">
<span id="contribute-configuration-channels"></span><h3>Defining channels and registering units<a class="headerlink" href="#defining-channels-and-registering-units" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">conf/ampel-contrib-PROJECTNAME</span></code> should contain at least a top-level configuration file named ampel.yaml, containining at least the definitions of your channels and any custom units
you may have. For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel</span><span class="p">:</span>
  <span class="nt">EXAMPLE_CHANNEL</span><span class="p">:</span>
    <span class="nt">channel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXAMPLE_CHANNEL</span>
    <span class="nt">contact</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ampel@desy.de</span>
    <span class="nt">active</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">auto_complete</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">live</span>
<span class="nt">unit</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ampel.contrib.groupname.t0.DecentFilterCopy</span>
</pre></div>
</div>
<p>The entries in <cite>unit</cite> are module names, i.e. <code class="code docutils literal notranslate"><span class="pre">ampel.contrib.groupname.t0.DecentFilterCopy</span></code> refers to the file <code class="docutils literal notranslate"><span class="pre">ampel/contrib/groupname/t0/DecentFilterCopy.py</span></code>. This file must contain one class, with the same name as the module. For example, when <code class="xref py py-class docutils literal notranslate"><span class="pre">AlertConsumer</span></code> requests instantiation of the unit named <code class="docutils literal notranslate"><span class="pre">DecentFilterCopy</span></code>, the entry above will cause Ampel to do the equivalent of <code class="code docutils literal notranslate"><span class="pre">from</span> <span class="pre">ampel.contrib.groupname.t0.DecentFilterCopy</span> <span class="pre">import</span> <span class="pre">DecentFilterCopy</span></code>.</p>
<p>Dictionaries can be either embedded directly into the top-level configuration
file, or in standalone files named after the key. For example, <cite>channel</cite> key
in the example above can be replaced with a file conf/ampel-contrib-PROJECTNAME/channel/EXAMPLE_CHANNEL.yaml with the contents:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channel</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXAMPLE_CHANNEL</span>
<span class="nt">contact</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ampel@desy.de</span>
<span class="nt">active</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">auto_complete</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">live</span>
</pre></div>
</div>
<p>This can be useful for keeping large configurations neatly organized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All of the configuration files mentioned here can also be supplied in <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON</a> format. We strongly recommend <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a>, however, since it is easier for a human to write and can include comments.</p>
</div>
</section>
<section id="validation">
<span id="contribute-configuration-validation"></span><h3>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h3>
<p>You should use the command <code class="code docutils literal notranslate"><span class="pre">ampel-config</span> <span class="pre">build</span></code> to build (and validate) an Ampel configuration file from all installed Ampel subprojects, including yours. The following examples use the <a class="reference external" href="https://github.com/AmpelProject/Ampel-contrib-sample/tree/03950a37dc4dc74c610df72887bd417239cd58aa">ampel-contrib-sample</a> template project.</p>
<p>You can use <code class="code docutils literal notranslate"><span class="pre">ampel-config</span> <span class="pre">build</span></code> along with <a class="reference external" href="https://mikefarah.gitbook.io/yq/">yq</a> to verify that your unit is registered:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; ampel-config build | yq .unit.base.DecentFilterCopy</span>
<span class="go">{</span>
<span class="go">  &quot;fqn&quot;: &quot;ampel.contrib.groupname.t0.DecentFilterCopy&quot;,</span>
<span class="go">  &quot;base&quot;: [</span>
<span class="go">    &quot;AbsAlertFilter&quot;</span>
<span class="go">  ],</span>
<span class="go">  &quot;distrib&quot;: &quot;ampel-contrib-sample&quot;,</span>
<span class="go">  &quot;file&quot;: &quot;conf/ampel-contrib-sample/unit.json&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>This will raise an exception if your channels or T3 processes refer to units
that are not registered or can’t be imported, or if your unit configurations are invalid. For example, if you add some garbage to DecentFilterCopy.py to make it non-importable, you will get:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; ampel-config build</span>
<span class="go">2020-09-24 15:52:29 AbsForwardConfigCollector:84 ERROR</span>
<span class="go"> Unit import error: ampel.contrib.groupname.t0.DecentFilterCopy (conf file: conf/ampel-contrib-sample/unit.json from distribution: ampel-contrib-sample)</span>
<span class="go">  Follow-up error: could not identify routing for ampel.contrib.groupname.t0.DecentFilterCopy</span>

<span class="go">2020-09-24 15:52:31 FirstPassConfig:97 WARNING</span>
<span class="go"> ForwardUnitConfigCollector (key: &#39;unit&#39;) has errors</span>
</pre></div>
</div>
<p>If you change <a class="reference external" href="https://github.com/AmpelProject/Ampel-contrib-sample/blob/03950a37dc4dc74c610df72887bd417239cd58aa/conf/ampel-contrib-sample/channel/EXAMPLE_BRIGHT_N_STABLE.yml#L11">channel definition</a>  to use a unit that is not registered, for example “LALALA_DecentFilterCopy”, you will get an error like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; ampel-config build</span>
<span class="go">2020-09-24 15:45:53 ConfigBuilder:297 ERROR</span>
<span class="go"> Unable to morph embedded process EXAMPLE_BRIGHT_N_STABLE|T0|ztf_uw_public (from conf/ampel-contrib-sample/channel/EXAMPLE_BRIGHT_N_STABLE.yml)</span>
<span class="go"> 1 validation error for ProcessModel</span>
<span class="go">processor -&gt; __root__ -&gt; directives -&gt; 0 -&gt; filter -&gt; __root__</span>
<span class="go">  Ampel unit not found: LALALA_DecentFilterCopy (type=value_error)</span>
</pre></div>
</div>
<p>If you try to configure it with parameters that are not valid, for example by <a class="reference external" href="https://github.com/AmpelProject/Ampel-contrib-sample/blob/03950a37dc4dc74c610df72887bd417239cd58aa/conf/ampel-contrib-sample/channel/EXAMPLE_BRIGHT_N_STABLE.yml#L13">setting</a> <code class="code docutils literal notranslate"><span class="pre">t0_filter.config.min_ndet</span> <span class="pre">=</span> <span class="pre">&quot;fish&quot;</span></code> when it <a class="reference external" href="https://github.com/AmpelProject/Ampel-contrib-sample/blob/03950a37dc4dc74c610df72887bd417239cd58aa/ampel/contrib/groupname/t0/DecentFilterCopy.py#L38">should be an integer</a>, you get:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; ampel-config build</span>
<span class="go">2020-09-24 15:48:05 ConfigBuilder:297 ERROR</span>
<span class="go"> Unable to morph embedded process EXAMPLE_BRIGHT_N_STABLE|T0|ztf_uw_public (from conf/ampel-contrib-sample/channel/EXAMPLE_BRIGHT_N_STABLE.yml)</span>
<span class="go"> 1 validation error for ProcessModel</span>
<span class="go">processor -&gt; __root__ -&gt; directives -&gt; 0 -&gt; filter -&gt; __root__ -&gt; min_ndet</span>
<span class="go">value is not a valid integer (type=type_error.integer)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following sections are largely obsolete. See <a class="reference internal" href="legacy.html#legacy-porting-guide"><span class="std std-ref">Porting contrib projects from v0.6</span></a> instead.</p>
</div>
</section>
</section>
<section id="add-your-own-t2">
<h2>Add your own T2<a class="headerlink" href="#add-your-own-t2" title="Permalink to this headline">¶</a></h2>
<p>T2 modules perform science-level operations on the <code class="xref py py-class docutils literal notranslate"><span class="pre">stocks</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code>, and <code class="xref py py-class docutils literal notranslate"><span class="pre">compounds</span></code> that are created as datapoints are added in the T0 stage. An example would be to make a template fit to the light curve of the transient or to look for more information on the transient in a set of atronomical catalogs.</p>
<p>The first ingredient is the T2 module itself, defining a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsT2Unit.AbsT2Unit</span></code>. This class has two mandatory methods: <code class="docutils literal notranslate"><span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">_run_</span></code>. The first is just a wrapper around the second, so <code class="docutils literal notranslate"><span class="pre">_run_</span></code> is where the magic happens. This method requires two arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_run_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">light_curve</span><span class="p">,</span> <span class="n">run_config</span><span class="p">):</span>
</pre></div>
</div>
<p>the first one is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.LightCurve</span></code> holding the transient information and photometric history. The <code class="docutils literal notranslate"><span class="pre">run_config</span></code> argument is a dictionary containing all the necessary parameters the job needs to run. For example, a catalog-matching T2 module will make use of the <code class="docutils literal notranslate"><span class="pre">light_curve.get_pos</span></code> method to compute the position of the transient and then search around this location among a set of astronomical catalogs specified in the <code class="docutils literal notranslate"><span class="pre">run_config</span></code> dictionary.</p>
<p>Once you have implemented your favourite T2, you need to register its arguments. As a given T2 module can serve many purposes depending on the parameters, i.e.: different templates in case of lightcurve fitting, different catalogs in case of coordinate matching, ecc., each of these must have be registered with its own name in the <cite>t2_run_configs.json</cite> file. The syntax for entries in this file is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;CATALOGMATCH_sdss_class&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;t2Unit&quot;</span><span class="p">:</span> <span class="s2">&quot;CATALOGMATCH&quot;</span><span class="p">,</span>
    <span class="nt">&quot;runConfig&quot;</span><span class="p">:</span> <span class="s2">&quot;sdss_class&quot;</span><span class="p">,</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;ampel-info@desy.de&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="nt">&quot;lastChange&quot;</span><span class="p">:</span> <span class="s2">&quot;27.08.2018&quot;</span><span class="p">,</span>
    <span class="nt">&quot;private&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;catalogs&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;SDSS_spec&quot;</span><span class="p">:{</span>
                <span class="nt">&quot;bla&quot;</span><span class="p">:</span> <span class="s2">&quot;bla&quot;</span><span class="p">,</span>
                <span class="nt">&quot;bla&quot;</span><span class="p">:</span> <span class="s2">&quot;bla&quot;</span><span class="p">,</span>
                <span class="nt">&quot;keys_to_append&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;bptclass&quot;</span><span class="p">,</span> <span class="s2">&quot;subclass&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In this example, we use a general purpose <code class="docutils literal notranslate"><span class="pre">CATALOGMATCH</span></code> T2 module to look for transient classification in the SDSS spectroscopic catalog and call this configuration <code class="docutils literal notranslate"><span class="pre">sdss_class</span></code>. This naming of the T2 configurations makes it possible to use the T2 module simply by adding the following <code class="docutils literal notranslate"><span class="pre">t2unit</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">{</span>
<span class="s">&quot;t2Unit&quot;</span><span class="nt"> </span><span class="p">:</span> <span class="s">&quot;CATALOGMATCH&quot;</span><span class="p p-Indicator">,</span>
<span class="s">&quot;runConfig&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;sdss_class&quot;</span>
<span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>to the <code class="docutils literal notranslate"><span class="pre">t2Compute</span></code> list of our channel configuration (the <code class="docutils literal notranslate"><span class="pre">channels.json</span></code> configuration file).</p>
</section>
<section id="configure-t3-scheduled-output">
<h2>Configure T3 (scheduled output)<a class="headerlink" href="#configure-t3-scheduled-output" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to configure scheduled summary output for your channel is to
add a source-&gt;t3Supervise to your channel config, e.g.:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>{
  &quot;channel&quot;: &quot;EXAMPLE&quot;,
  &quot;sources&quot;: [
    {
      ...
      &quot;t3Supervise&quot;: [
        {
          &quot;task&quot;: &quot;ExampleSummary&quot;,
          &quot;schedule&quot;: &quot;every().day.at(&#39;15:00&#39;)&quot;,
          &quot;transients&quot;: {
            &quot;select&quot;: {
              &quot;created&quot;: {
                &quot;after&quot;: {
                  &quot;use&quot;: &quot;$timeDelta&quot;,
                  &quot;arguments&quot;: {&quot;days&quot;: -40}
                }
              },
              &quot;modified&quot;: {
                &quot;after&quot;: {
                  &quot;use&quot;: &quot;$timeLastRun&quot;,
                  &quot;event&quot;: &quot;ExampleSummary&quot;
                }
              }
              &quot;scienceRecords&quot;: {
                &quot;unitId&quot;: &quot;SNCOSMO&quot;,
                &quot;match&quot;: {
                  &quot;fit_acceptable&quot;: true,
                  &quot;sncosmo_info.success&quot;: true,
                  &quot;fit_results.z&quot;: {&quot;$gt&quot;: 0},
                  &quot;fit_results.x1&quot;: {&quot;$lt&quot;: 10}
                }
              }
            },
            &quot;state&quot;: &quot;$latest&quot;,
            &quot;content&quot;: {
              &quot;docs&quot;: [&quot;TRANSIENT&quot;, &quot;COMPOUND&quot;, &quot;T2RECORD&quot;, &quot;PHOTOPOINT&quot;],
              &quot;t2SubSelection&quot;: [&quot;SNCOSMO&quot;, &quot;CATALOGMATCH&quot;]
            }
          },
          &quot;unitId&quot;: &quot;SlackSummaryPublisher&quot;,
          &quot;runConfig&quot;: {
            &quot;quiet&quot;: true,
            &quot;slackToken&quot;: &quot;SECRETSLACKTOKEN&quot;,
            &quot;slackChannel&quot;: &quot;#ampel-live&quot;,
            &quot;fullPhotometry&quot;: true
          }
        }
      ]
    }
  }
</pre></div>
</div>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Ideally, your plugin should depend only on Python 3.6 and Ampel-base. Several other common packages are already included in the Ampel distribution. You can safely rely on:</p>
<ul class="simple">
<li><p>numpy</p></li>
<li><p>astropy</p></li>
<li><p>pandas</p></li>
<li><p>requests</p></li>
</ul>
<p>Further dependencies can be added on a case-by-case basis, provided that they are packaged with <cite>conda</cite> and do not conflict with the existing Ampel distribution. Heavy-weight, unpackaged, and conflicting dependencies can be supported through plugins that live in separate containers. The mechanism for this has not be completely defined yet.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Write tests. Make sure they test things. Make sure they pass. See <a class="reference internal" href="testing.html#testing"><span class="std std-ref">Running the automated tests</span></a>.</p>
</section>
<section id="getting-your-plugin-into-the-main-ampel-instance-at-desy">
<h2>Getting your plugin into the main Ampel instance at DESY<a class="headerlink" href="#getting-your-plugin-into-the-main-ampel-instance-at-desy" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to do this:</p>
<ol class="arabic simple">
<li><p>Make one of the Ampel operators (&#64;vbrinnel or &#64;jvansanten) a co-owner of your project. We will then take care of integrating your plugin into the build.</p></li>
<li><p>Create a special, passwordless ssh key, and communicate it to an operator. Add the public key as a (read-only) deploy key for your repository.</p></li>
</ol>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ampel.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="legacy.html"
                        title="previous chapter">Porting contrib projects from v0.6</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="testing.html"
                        title="next chapter">Running the automated tests</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="testing.html" title="Running the automated tests"
             >next</a> |</li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.8.0-alpha.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Contribute</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2021, Ampel Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.2.
    </div>
  </body>
</html>