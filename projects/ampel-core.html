
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ampel-core &#8212; Ampel 0.7.0a0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ampel-alerts" href="ampel-alerts.html" />
    <link rel="prev" title="Ampel-interface" href="ampel-base.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ampel-alerts.html" title="Ampel-alerts"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ampel-base.html" title="Ampel-interface"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Ampel 0.7.0a0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API documentation by project</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ampel-core">
<h1>Ampel-core<a class="headerlink" href="#ampel-core" title="Permalink to this headline">¶</a></h1>
<p>The actual implementation of the Ampel framework</p>
<div class="section" id="processing-units">
<h2>Processing units<a class="headerlink" href="#processing-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.context.T3AddLastRunTime.</code><code class="sig-name descname">T3AddLastRunTime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender</span></code></a></p>
<dl class="py attribute">
<dt id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.lookup_range">
<code class="sig-name descname">lookup_range</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></em><em class="property"> = {'days': -7}</em><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.lookup_range" title="Permalink to this definition">¶</a></dt>
<dd><p>timedelta to search for previous run</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.fallback">
<code class="sig-name descname">fallback</code><em class="property">: Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.fallback" title="Permalink to this definition">¶</a></dt>
<dd><p>timedelta to use if no previous run found</p>
</dd></dl>

<dl class="py method">
<dt id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add last run time (UNIX epoch) as “last_run”.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.context.T3AddAlertsNumber.</code><code class="sig-name descname">T3AddAlertsNumber</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender</span></code></a></p>
<dl class="py method">
<dt id="ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_context</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add number of alerts processed since last run of this event as “processed_alerts”</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="base-classes-for-processing-units">
<h2>Base classes for processing units<a class="headerlink" href="#base-classes-for-processing-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.core.AdminUnit.AdminUnit">
<em class="property">class </em><code class="sig-prename descclassname">ampel.core.AdminUnit.</code><code class="sig-name descname">AdminUnit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AdminUnit.AdminUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>Top level abstract class receiving a reference to
an AmpelContext instance as constructor parameter</p>
<dl class="py attribute">
<dt id="ampel.core.AdminUnit.AdminUnit.context">
<code class="sig-name descname">context</code><em class="property">: AmpelContext</em><a class="headerlink" href="#ampel.core.AdminUnit.AdminUnit.context" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration, database client, etc.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="processor-units">
<h2>Processor units<a class="headerlink" href="#processor-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.t2.T2Processor.T2Processor">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t2.T2Processor.</code><code class="sig-name descname">T2Processor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t2_units</strong> – ids of the t2 units to run. If not specified, any t2 unit will be run</p></li>
<li><p><strong>run_state</strong> – only t2 docs with field ‘status’ matching with provided integer number will be processed</p></li>
<li><p><strong>doc_limit</strong> – max number of t2 docs to process in run loop</p></li>
<li><p><strong>send_beacon</strong> – whether to update the beacon collection before run() is executed</p></li>
<li><p><strong>gc_collect</strong> – whether to actively perform garbage collection between processing of T2 docs</p></li>
<li><p><strong>log_profile</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>db_handler_kwargs</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>base_log_flag</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>raise_exc</strong> – See AbsProcessorUnit docstring (default False)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.sig_exit">
<code class="sig-name descname">sig_exit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signum</span></em>, <em class="sig-param"><span class="n">frame</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.sig_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Executed when SIGTERM/SIGINT is caught. Stops doc processing in run()</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.create_beacon">
<code class="sig-name descname">create_beacon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.create_beacon" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a beacon document if it does not exist yet</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pre_check</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.run" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of t2 docs processed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.process_t2_doc">
<code class="sig-name descname">process_t2_doc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t2_unit</span></em>, <em class="sig-param"><span class="n">t2_doc</span></em>, <em class="sig-param"><span class="n">logger</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.process_t2_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Regarding the possible int return code:
usually, if an int is returned, it should be a T2RunState member
but let’s not be too restrictive here</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>], <a class="reference internal" href="ampel-base.html#ampel.struct.JournalExtra.JournalExtra" title="ampel.struct.JournalExtra.JournalExtra"><code class="xref py py-class docutils literal notranslate"><span class="pre">JournalExtra</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.ItemsView" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ItemsView</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>], <a class="reference internal" href="ampel-base.html#ampel.struct.JournalExtra.JournalExtra" title="ampel.struct.JournalExtra.JournalExtra"><code class="xref py py-class docutils literal notranslate"><span class="pre">JournalExtra</span></code></a>]]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.update_records">
<code class="sig-name descname">update_records</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sub_rec</span></em>, <em class="sig-param"><span class="n">jrec</span></em>, <em class="sig-param"><span class="n">result</span></em>, <em class="sig-param"><span class="n">jextra</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.update_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates provided T2SubRecord and JournalRecord
using results of a t2 unit (Tuple[Dict, JournalExtra])</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.t2.T2Processor.T2Processor.push_t2_update">
<code class="sig-name descname">push_t2_update</code><span class="sig-paren">(</span><em class="sig-param">rec</em>, <em class="sig-param">sub_rec</em>, <em class="sig-param">logger</em>, <em class="sig-param">*</em>, <em class="sig-param">status=&lt;T2RunState.COMPLETED: 0&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.push_t2_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs DB updates of the T2 doc and stock journal</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.T3Processor.T3Processor">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.T3Processor.</code><code class="sig-name descname">T3Processor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">update_journal</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">update_events</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">extra_journal_tag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_profile</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>db_handler_kwargs</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>base_log_flag</strong> – See AbsProcessorUnit docstring</p></li>
<li><p><strong>raise_exc</strong> – See AbsProcessorUnit docstring (default False)</p></li>
<li><p><strong>update_journal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Record the invocation of this event in the transient journal</p></li>
<li><p><strong>update_events</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Record this event in the events collection</p></li>
</ul>
</dd>
</dl>
<p>Note: if you want to run an “anonymous” event, please:</p>
<ul class="simple">
<li><p>use a log_profile without db logging (profiles are defined under ‘logging’ in the ampel config)</p></li>
<li><p>set update_journal = False (no update to the transient doc)</p></li>
<li><p>set update_events = False (no update to the events collection)</p></li>
<li><p>set raise_exc = True (troubles collection will not be populated if an exception occurs)</p></li>
</ul>
</dd></dl>

</div>
<div class="section" id="t3-machinery">
<h2>T3 machinery<a class="headerlink" href="#t3-machinery" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.model.t3.T3Directive.T3Directive">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.t3.T3Directive.</code><code class="sig-name descname">T3Directive</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of a Tier 3 processing sequence.</p>
<dl class="py attribute">
<dt id="ampel.model.t3.T3Directive.T3Directive.context">
<code class="sig-name descname">context</code><em class="property">: Optional<span class="p">[</span>Sequence<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.context" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide context for run</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.T3Directive.T3Directive.select">
<code class="sig-name descname">select</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select stocks</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.T3Directive.T3Directive.load">
<code class="sig-name descname">load</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a> for each selected stock</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.T3Directive.T3Directive.complement">
<code class="sig-name descname">complement</code><em class="property">: Optional<span class="p">[</span>Sequence<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add external information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.T3Directive.T3Directive.run">
<code class="sig-name descname">run</code><em class="property">: <a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute units on each view</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.context.AbsT3RunContextAppender.</code><code class="sig-name descname">AbsT3RunContextAppender</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.core.AdminUnit.AdminUnit</span></code></a></p>
<p>Add contextual information to a T3 process, such as the time of the previous
run, or the number of alerts processed since that run.</p>
<p>Inherits from AdminUnit because subclasses might need access to
the AmpelConfig (foremost to the contained resource definitions)</p>
<dl class="py method">
<dt id="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">run_context</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends key, values to the provided context dict instance</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.select.AbsT3Selector.AbsT3Selector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.select.AbsT3Selector.</code><code class="sig-name descname">AbsT3Selector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.select.AbsT3Selector.AbsT3Selector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.select.T3StockSelector.</code><code class="sig-name descname">T3StockSelector</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>Default stock/transient selector used by T3Processor
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="s2">&quot;$timeDelta&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">40</span><span class="p">}}},</span>
   <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="s2">&quot;$timeDelta&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}}},</span>
   <span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;HU_GP_CLEAN&quot;</span><span class="p">,</span>
   <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;with&quot;</span><span class="p">:</span> <span class="s2">&quot;ZTF&quot;</span><span class="p">,</span> <span class="s2">&quot;without&quot;</span><span class="p">:</span> <span class="s2">&quot;HAS_ERROR&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector.created">
<code class="sig-name descname">created</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="ampel.model.time.TimeConstraintModel.TimeConstraintModel">ampel.model.time.TimeConstraintModel.TimeConstraintModel</a><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.created" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by creation time</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector.modified">
<code class="sig-name descname">modified</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="ampel.model.time.TimeConstraintModel.TimeConstraintModel">ampel.model.time.TimeConstraintModel.TimeConstraintModel</a><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by modification time</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector.channel">
<code class="sig-name descname">channel</code><em class="property">: Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf">ampel.model.operator.AnyOf.AnyOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf">ampel.model.operator.AllOf.AllOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.OneOf.OneOf" title="ampel.model.operator.OneOf.OneOf">ampel.model.operator.OneOf.OneOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by channel</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector.tag">
<code class="sig-name descname">tag</code><em class="property">: Optional[Dict[Literal[with, without], Union[int, str, Dict, ampel.model.operator.AllOf.AllOf[typing.Union[int, str]], ampel.model.operator.AnyOf.AnyOf[typing.Union[int, str]], ampel.model.operator.OneOf.OneOf[typing.Union[int, str]]]]]</em><em class="property"> = None</em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by tag</p>
</dd></dl>

<dl class="py method">
<dt id="ampel.t3.select.T3StockSelector.T3StockSelector.fetch">
<code class="sig-name descname">fetch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>The returned Iterator is a pymongo Cursor</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.select.T3FilteringStockSelector.</code><code class="sig-name descname">T3FilteringStockSelector</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>Selector subclass that filters stocks based on their latest T2 results.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="o">...</span>
        <span class="s2">&quot;t2_filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;T2SNCosmo&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;fit_acceptable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                                <span class="s2">&quot;fit_results.c&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;$gt&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
                        <span class="p">},</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py method">
<dt id="ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector.fetch">
<code class="sig-name descname">fetch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>The returned Iterator is a pymongo Cursor</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.load.AbsT3Loader.AbsT3Loader">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.load.AbsT3Loader.</code><code class="sig-name descname">AbsT3Loader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.load.AbsT3Loader.AbsT3Loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Data loaders need access to the ampel db (and hence inherits AdminUnit)
Note: ‘directives’ can contain strings which will be resolved by retrieving
the associated alias from the ampel config</p>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.load.T3SimpleDataLoader.</code><code class="sig-name descname">T3SimpleDataLoader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.load.T3LatestStateDataLoader.</code><code class="sig-name descname">T3LatestStateDataLoader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stock_ids</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Warning: if stock_ids is an Iterator, it will be fully consumed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.complement.AbsT3DataAppender.</code><code class="sig-name descname">AbsT3DataAppender</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherits AdminUnit because implementing classes might need access to
an AmpelConfig instance (foremost to the contained resource definitions)</p>
<dl class="py method">
<dt id="ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender.complement">
<code class="sig-name descname">complement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">it</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.complement.T3ExtJournalAppender.</code><code class="sig-name descname">T3ExtJournalAppender</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows to import journal entries from a ‘foreign’ database</p>
<dl class="py method">
<dt id="ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender.complement">
<code class="sig-name descname">complement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">it</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.AbsT3UnitRunner.</code><code class="sig-name descname">AbsT3UnitRunner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.update_journal">
<code class="sig-name descname">update_journal</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></em><em class="property"> = True</em><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.update_journal" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the invocation of this evetn in the journal of each selected transient</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.T3UnitRunner.T3UnitRunner">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.T3UnitRunner.</code><code class="sig-name descname">T3UnitRunner</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner</span></code></a></p>
<p>Default implementation handling the instructions defined
by <a class="reference internal" href="#ampel.model.t3.T3Directive.T3Directive" title="ampel.model.t3.T3Directive.T3Directive"><code class="xref py py-class docutils literal notranslate"><span class="pre">T3Directive.run</span></code></a>.</p>
<dl class="py class">
<dt id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective">
<em class="property">class </em><code class="sig-name descname">RunDirective</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
<p>Internal model used for field ‘directives’ of T3UnitRunner</p>
<dl class="py method">
<dt id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.cast_to_sequence_if_need_be">
<em class="property">classmethod </em><code class="sig-name descname">cast_to_sequence_if_need_be</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">v</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.cast_to_sequence_if_need_be" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.T3DynamicUnitRunner.</code><code class="sig-name descname">T3DynamicUnitRunner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner</span></code></a></p>
<p>Unit runner that for each channel found in the elements loaded by the stages:</p>
<ul class="simple">
<li><p>spawns a dedicated <a class="reference internal" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner" title="ampel.t3.run.T3UnitRunner.T3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">T3UnitRunner</span></code></a> instance configured to filter and project elements wrt this channel</p></li>
<li><p>execute the associated T3 units</p></li>
</ul>
<p>Example:
A general T3 process performs a broad, channel-less query.
Many stocks are returned, each possibly associated with different channels.
This unit builds a set of all channels referenced by the results.
Then, for each channel, the information about the referenced elements are posted into
a dedicated Slack channel whose name corresponds to the Ampel channel. Suppose,
for example, that the results contain objects:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">1</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{A}&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">2</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{A,</span> <span class="pre">B}&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">3</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{B,</span> <span class="pre">C,</span> <span class="pre">D}&gt;</span></code></p></li>
</ul>
<p>This will cause:</p>
<ul class="simple">
<li><p>Object 1 and 2 to be posted to slack channel #A</p></li>
<li><p>Object 2 and 3  to be posted to slack channel #B</p></li>
<li><p>Object 3 to be posted to slack channel #C</p></li>
<li><p>Object 3 to be posted to slack channel #D</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.filter.AbsT3Filter.AbsT3Filter">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.filter.AbsT3Filter.</code><code class="sig-name descname">AbsT3Filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.filter.AbsT3Filter.AbsT3Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelABC.AmpelABC</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.filter.T3AmpelBufferFilter.</code><code class="sig-name descname">T3AmpelBufferFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.filter.AbsT3Filter.AbsT3Filter" title="ampel.t3.run.filter.AbsT3Filter.AbsT3Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.filter.AbsT3Filter.AbsT3Filter</span></code></a></p>
<dl class="py class">
<dt id="ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter.FilterModel">
<em class="property">class </em><code class="sig-name descname">FilterModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter.FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.project.AbsT3Projector.AbsT3Projector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.project.AbsT3Projector.</code><code class="sig-name descname">AbsT3Projector</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.AbsT3Projector.AbsT3Projector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelABC.AmpelABC</span></code>, <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.project.T3BaseProjector.</code><code class="sig-name descname">T3BaseProjector</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.project.AbsT3Projector.AbsT3Projector" title="ampel.t3.run.project.AbsT3Projector.AbsT3Projector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.project.AbsT3Projector.AbsT3Projector</span></code></a></p>
<p>Creates SnapView(s) based on AmpelBuffer(s)</p>
<p>AmpelBuffer attributes are selected according to ‘filters’ content:</p>
<ul class="simple">
<li><p>missing fields will not be included
(for example, if ‘names’ is absent in filters dict,
the field ‘names’ of all snapviews will be None)</p></li>
<li><p>a “pass-through” behavior occurs when a dict value are None.
(for example, if ‘names’ is set to None, snapviews instances
will contain the all the names of the corresponding AmpelBuffer)</p></li>
</ul>
<dl class="py class">
<dt id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.ClassModel">
<em class="property">class </em><code class="sig-name descname">ClassModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.ClassModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FuncModel">
<em class="property">class </em><code class="sig-name descname">FuncModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FuncModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FilterOutModel">
<em class="property">class </em><code class="sig-name descname">FilterOutModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FilterOutModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py method">
<dt id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.add_func_projector">
<code class="sig-name descname">add_func_projector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">first</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.add_func_projector" title="Permalink to this definition">¶</a></dt>
<dd><p>A matcher rejects/accepts dict instances from a list referenced by the given key.
For example, a ampel_buffer intance can contain many t2 documents (ampel_buffer dict key “t2”).
The matchers will determine which dict from the list should be kept
(a typical case would be to exclude dicts based on channel associations)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>first</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether field matchers should be put first in the list of matchers for the provided key</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>ValueError if requested field projector unit / configs are invalid</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t3.run.project.T3ChannelProjector.</code><code class="sig-name descname">T3ChannelProjector</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector" title="ampel.t3.run.project.T3BaseProjector.T3BaseProjector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.project.T3BaseProjector.T3BaseProjector</span></code></a></p>
<dl class="py method">
<dt id="ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector.channel_projection">
<code class="sig-name descname">channel_projection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dicts</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector.channel_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out dict entries not associated with configured channel
Note: debug ouput handled by super class</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="context-and-configuration">
<h2>Context and configuration<a class="headerlink" href="#context-and-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.core.AmpelContext.AmpelContext">
<em class="property">class </em><code class="sig-prename descclassname">ampel.core.AmpelContext.</code><code class="sig-name descname">AmpelContext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.config.AmpelConfig.AmpelConfig" title="ampel.config.AmpelConfig.AmpelConfig">ampel.config.AmpelConfig.AmpelConfig</a></span></em>, <em class="sig-param"><span class="n">db</span><span class="p">:</span> <span class="n">AmpelDB</span></em>, <em class="sig-param"><span class="n">loader</span><span class="p">:</span> <span class="n">UnitLoader</span></em>, <em class="sig-param"><span class="n">tier</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Literal<span class="p">[</span>0<span class="p">, </span>1<span class="p">, </span>2<span class="p">, </span>3<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resource</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">admin_msg</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is typically instantiated by Ampel controllers
and provided to “processor unit” instances.
Note: this class might in the future be capable
of handling multiple AmpelConfig/AmpelDB instances</p>
<dl class="py attribute">
<dt id="ampel.core.AmpelContext.AmpelContext.config">
<code class="sig-name descname">config</code><em class="property">: <a class="reference internal" href="ampel-base.html#ampel.config.AmpelConfig.AmpelConfig" title="ampel.config.AmpelConfig.AmpelConfig">ampel.config.AmpelConfig.AmpelConfig</a></em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.config" title="Permalink to this definition">¶</a></dt>
<dd><p>System configuration</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelContext.AmpelContext.db">
<code class="sig-name descname">db</code><em class="property">: AmpelDB</em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Database client</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelContext.AmpelContext.loader">
<code class="sig-name descname">loader</code><em class="property">: UnitLoader</em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a unit from a <a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnitModel</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelContext.AmpelContext.tier">
<code class="sig-name descname">tier</code><em class="property">: Optional<span class="p">[</span>Literal<span class="p">[</span>0<span class="p">, </span>1<span class="p">, </span>2<span class="p">, </span>3<span class="p">]</span><span class="p">]</span></em><em class="property"> = None</em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.tier" title="Permalink to this definition">¶</a></dt>
<dd><p>Context is valid for this processing tier only (if None, valid for all).</p>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.load">
<em class="property">classmethod </em><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config_file_path</span></em>, <em class="sig-param"><span class="n">pwd_file_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pwds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">freeze_config</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – either a local path to an ampel config file (yaml or json) 
or directly an AmpelConfig instance.</p></li>
<li><p><strong>pwd_file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – if provided, the encrypted conf entries possibly contained in the
ampel config instance will be decrypted using the provided password file.
The password file must define one password per line.</p></li>
<li><p><strong>freeze_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether to convert the elements contained of ampel config
into immutable structures (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> -&gt;
<a class="reference internal" href="ampel-base.html#ampel.view.ReadOnlyDict.ReadOnlyDict" title="ampel.view.ReadOnlyDict.ReadOnlyDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadOnlyDict</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> -&gt; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>).
Parameter does only apply if the config is loaded by this method, i.e if parameter ‘config’ is a str.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.build">
<em class="property">classmethod </em><code class="sig-name descname">build</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_errors</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">pwd_file_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pwds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">freeze_config</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">tier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<p>The required underlying ampel configuration (<a class="reference internal" href="ampel-base.html#ampel.config.AmpelConfig.AmpelConfig" title="ampel.config.AmpelConfig.AmpelConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a>) is built from scratch,
meaning all available configurations defined in the various ampel repositories available locally
are collected, merged merged together and morphed the info into the final ampel config.
This is a convenience method, do not use for production</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.get_config">
<code class="sig-name descname">get_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_config" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, AmpelContext might hold references to multiple different config</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="ampel-base.html#ampel.config.AmpelConfig.AmpelConfig" title="ampel.config.AmpelConfig.AmpelConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.get_database">
<code class="sig-name descname">get_database</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_database" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, this class might hold references to multiple different databases</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>AmpelDB</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.deactivate_processes">
<code class="sig-name descname">deactivate_processes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.deactivate_processes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.AmpelContext.AmpelContext.activate_process">
<code class="sig-name descname">activate_process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">tier</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.activate_process" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if process was deactivated, True if not found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.core.UnitLoader.UnitLoader">
<em class="property">class </em><code class="sig-prename descclassname">ampel.core.UnitLoader.</code><code class="sig-name descname">UnitLoader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">tier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">secrets</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.resolve_aliases">
<code class="sig-name descname">resolve_aliases</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively resolve aliases from config</p>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.resolve_secrets">
<em class="property">classmethod </em><code class="sig-name descname">resolve_secrets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">secrets</span></em>, <em class="sig-param"><span class="n">unit</span></em>, <em class="sig-param"><span class="n">annotations</span></em>, <em class="sig-param"><span class="n">defaults</span></em>, <em class="sig-param"><span class="n">init_config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively walk annotations, resolving any Secret fields that are found</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.get_init_config">
<code class="sig-name descname">get_init_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span></em>, <em class="sig-param"><span class="n">config</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">override</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">resolve_secrets</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_init_config" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError is model type is not recognized</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.get_resources">
<code class="sig-name descname">get_resources</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Resources are defined using the static variable ‘require’ in ampel units
-&gt; example: catsHTM.default</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.get_class_by_name">
<code class="sig-name descname">get_class_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></span></em>, <em class="sig-param"><span class="n">unit_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>T<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Type<span class="p">[</span>T<span class="p">]</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_class_by_name" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname">get_class_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></span></em>, <em class="sig-param"><span class="n">unit_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em><span class="sig-paren">)</span> &#x2192; Type<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel">ampel.base.AmpelBaseModel.AmpelBaseModel</a><span class="p">]</span></dt>
<dd><p>Matches the parameter ‘name’ with the unit definitions defined in the ampel_config.
This allows to retrieve the corresponding fully qualified name of the class and to load it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[~T]]) – <ul class="simple">
<li><p>DataUnit or any sublcass of DataUnit</p></li>
<li><p>AdminUnit or any sublcass of AdminUnit</p></li>
<li><p>If None, FQN will be retrieved from the auxiliary class conf entries and returned object will have Type[Any]</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>ValueError if unit cannot be found or loaded or if parent class is unrecognized</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[~T], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.new">
<code class="sig-name descname">new</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">unit_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>T<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname">new</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">unit_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel">ampel.base.AmpelBaseModel.AmpelBaseModel</a></dt>
<dd><p>Instantiate new object based on provided model and kwargs.
:param ‘unit_type’: performs isinstance check and raise error on mismatch. Enables mypy/other static checks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~T, <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.new_base_unit">
<code class="sig-name descname">new_base_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="n">logger</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger">ampel.log.AmpelLogger.AmpelLogger</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>BT<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; BT<a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_base_unit" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname">new_base_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="n">logger</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger">ampel.log.AmpelLogger.AmpelLogger</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="ampel-base.html#ampel.base.DataUnit.DataUnit" title="ampel.base.DataUnit.DataUnit">ampel.base.DataUnit.DataUnit</a></dt>
<dd><p>Base units require logger and resource as init parameters, additionaly to the potentialy
defined custom parameters which will be provided as a union of the model config
and the kwargs provided to this method (the latter having prevalance)
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~BT, <a class="reference internal" href="ampel-base.html#ampel.base.DataUnit.DataUnit" title="ampel.base.DataUnit.DataUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataUnit</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.new_admin_unit">
<code class="sig-name descname">new_admin_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="n">context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext">ampel.core.AmpelContext.AmpelContext</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>PT<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; PT<a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_admin_unit" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="sig-name descname">new_admin_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="n">context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext">ampel.core.AmpelContext.AmpelContext</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit">ampel.core.AdminUnit.AdminUnit</a></dt>
<dd><p>Processor units require a context as init parameters, additionaly to the potentialy
defined custom parameters which will be provided as a union of the model config
and the kwargs provided to this method (the latter having prevalance)
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminUnit</span></code></a>, ~PT]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.new_aux_unit">
<em class="property">static </em><code class="sig-name descname">new_aux_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>T<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; T<a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_aux_unit" title="Permalink to this definition">¶</a></dt>
<dt>
<em class="property">static </em><code class="sig-name descname">new_aux_unit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit_model</span><span class="p">:</span> <span class="n"><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel">ampel.base.AmpelBaseModel.AmpelBaseModel</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError is unit_model.config is not of type Optional[dict]</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~T, <a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.get_aux_class">
<em class="property">static </em><code class="sig-name descname">get_aux_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">klass</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Type<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n">Type<span class="p">[</span>T<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Type<span class="p">[</span>T<span class="p">]</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_aux_class" title="Permalink to this definition">¶</a></dt>
<dt>
<em class="property">static </em><code class="sig-name descname">get_aux_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">klass</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Type<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sub_type</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a></span> <span class="o">=</span> <span class="default_value">'...'</span></em><span class="sig-paren">)</span> &#x2192; Type<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel">ampel.base.AmpelBaseModel.AmpelBaseModel</a><span class="p">]</span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError if unit is unknown</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[~T], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<a class="reference internal" href="ampel-base.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="ampel.base.AmpelBaseModel.AmpelBaseModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.core.UnitLoader.UnitLoader.check_class">
<em class="property">static </em><code class="sig-name descname">check_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">Klass</span></em>, <em class="sig-param"><span class="n">class_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.check_class" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.dev.DictSecretProvider.DictSecretProvider">
<em class="property">class </em><code class="sig-prename descclassname">ampel.dev.DictSecretProvider.</code><code class="sig-name descname">DictSecretProvider</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">items</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="ampel.dev.DictSecretProvider.DictSecretProvider.load">
<em class="property">classmethod </em><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load from a YAML file. If the file was encrypted with <a class="reference external" href="https://github.com/mozilla/sops">sops</a>, it will
be decrypted with <code class="docutils literal notranslate"><span class="pre">sops</span> <span class="pre">-d</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.dev.DictSecretProvider.DictSecretProvider" title="ampel.dev.DictSecretProvider.DictSecretProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictSecretProvider</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ampel.dev.DictSecretProvider.DictSecretProvider.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">value_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a secret by key. May raise an exception if the key is not known.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SecretWrapper</span></code>[~T]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-classes">
<h2>Data classes<a class="headerlink" href="#data-classes" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer">
<em class="property">class </em><code class="sig-prename descclassname">ampel.core.AmpelBuffer.</code><code class="sig-name descname">AmpelBuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Content bundle used to build <a class="reference internal" href="ampel-base.html#ampel.view.SnapView.SnapView" title="ampel.view.SnapView.SnapView"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapView</span></code></a>.</p>
<p>This is a dict containing 1 or more of the following items:</p>
<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.id">
<code class="sig-name descname">id</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)">bytes</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.stock">
<code class="sig-name descname">stock</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.content.StockRecord.StockRecord" title="ampel.content.StockRecord.StockRecord">ampel.content.StockRecord.StockRecord</a><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.stock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.t0">
<code class="sig-name descname">t0</code><em class="property">: Optional<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.content.DataPoint.DataPoint" title="ampel.content.DataPoint.DataPoint">ampel.content.DataPoint.DataPoint</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.t1">
<code class="sig-name descname">t1</code><em class="property">: Optional<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.content.Compound.Compound" title="ampel.content.Compound.Compound">ampel.content.Compound.Compound</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.t2">
<code class="sig-name descname">t2</code><em class="property">: Optional<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.content.T2Record.T2Record" title="ampel.content.T2Record.T2Record">ampel.content.T2Record.T2Record</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.log">
<code class="sig-name descname">log</code><em class="property">: Optional<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.content.LogRecord.LogRecord" title="ampel.content.LogRecord.LogRecord">ampel.content.LogRecord.LogRecord</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.core.AmpelBuffer.AmpelBuffer.extra">
<code class="sig-name descname">extra</code><em class="property">: Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.extra" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.model.operator.AnyOf.AnyOf">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.operator.AnyOf.</code><code class="sig-name descname">AnyOf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.operator.AnyOf.AnyOf.any_of">
<code class="sig-name descname">any_of</code><em class="property">: List<span class="p">[</span>Union<span class="p">[</span>T<span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf">ampel.model.operator.AllOf.AllOf</a><span class="p">[</span>T<span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf.any_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical OR</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.operator.AllOf.AllOf">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.operator.AllOf.</code><code class="sig-name descname">AllOf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.operator.AllOf.AllOf.all_of">
<code class="sig-name descname">all_of</code><em class="property">: List<span class="p">[</span>T<span class="p">]</span></em><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf.all_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical AND</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.operator.OneOf.OneOf">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.operator.OneOf.</code><code class="sig-name descname">OneOf</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.operator.OneOf.OneOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.operator.OneOf.OneOf.one_of">
<code class="sig-name descname">one_of</code><em class="property">: List<span class="p">[</span>T<span class="p">]</span></em><a class="headerlink" href="#ampel.model.operator.OneOf.OneOf.one_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical XOR</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This can’t be modelled in Mongo, as it has no logical XOR operation</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.time.TimeConstraintModel.TimeConstraintModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.time.TimeConstraintModel.</code><code class="sig-name descname">TimeConstraintModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_delta&quot;</span><span class="p">,</span>
            <span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeStr&quot;</span><span class="p">:</span> <span class="s2">&quot;21/11/06 16:30&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%y %H:%M&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_last_run&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;val_test&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unix_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1531306299</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.before">
<code class="sig-name descname">before</code><em class="property">: Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel">ampel.model.time.TimeDeltaModel.TimeDeltaModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel">ampel.model.time.TimeLastRunModel.TimeLastRunModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel">ampel.model.time.TimeStringModel.TimeStringModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel">ampel.model.time.UnixTimeModel.UnixTimeModel</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.before" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.after">
<code class="sig-name descname">after</code><em class="property">: Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel">ampel.model.time.TimeDeltaModel.TimeDeltaModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel">ampel.model.time.TimeLastRunModel.TimeLastRunModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel">ampel.model.time.TimeStringModel.TimeStringModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel">ampel.model.time.UnixTimeModel.UnixTimeModel</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.after" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model">
<code class="sig-name descname">get_query_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this method with db=&lt;instance of AmpelDB&gt;
if your time constraint is based on TimeLastRunModel</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">QueryTimeModel</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.time.TimeDeltaModel.</code><code class="sig-name descname">TimeDeltaModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type">
<code class="sig-name descname">match_type</code><em class="property">: Literal<span class="p">[</span>time_delta<span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.days">
<code class="sig-name descname">days</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds">
<code class="sig-name descname">seconds</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds">
<code class="sig-name descname">microseconds</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds">
<code class="sig-name descname">milliseconds</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes">
<code class="sig-name descname">minutes</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours">
<code class="sig-name descname">hours</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks">
<code class="sig-name descname">weeks</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp">
<code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.time.TimeLastRunModel.</code><code class="sig-name descname">TimeLastRunModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type">
<code class="sig-name descname">match_type</code><em class="property">: Literal<span class="p">[</span>time_last_run<span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name">
<code class="sig-name descname">process_name</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback">
<code class="sig-name descname">fallback</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><span class="p">, </span>Dict<span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success">
<code class="sig-name descname">require_success</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp">
<code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.time.TimeStringModel.TimeStringModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.time.TimeStringModel.</code><code class="sig-name descname">TimeStringModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.time.TimeStringModel.TimeStringModel.match_type">
<code class="sig-name descname">match_type</code><em class="property">: Literal<span class="p">[</span>time_string<span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr">
<code class="sig-name descname">dateTimeStr</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat">
<code class="sig-name descname">dateTimeFormat</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp">
<code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.time.UnixTimeModel.UnixTimeModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.time.UnixTimeModel.</code><code class="sig-name descname">UnixTimeModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.time.UnixTimeModel.UnixTimeModel.match_type">
<code class="sig-name descname">match_type</code><em class="property">: Literal<span class="p">[</span>unix_time<span class="p">]</span></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.model.time.UnixTimeModel.UnixTimeModel.value">
<code class="sig-name descname">value</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp">
<code class="sig-name descname">get_timestamp</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.t3.LoaderDirective.LoaderDirective">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.t3.LoaderDirective.</code><code class="sig-name descname">LoaderDirective</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of documents to load</p>
<dl class="py attribute">
<dt id="ampel.model.t3.LoaderDirective.LoaderDirective.col">
<code class="sig-name descname">col</code><em class="property">: Literal<span class="p">[</span>stock<span class="p">, </span>t0<span class="p">, </span>t1<span class="p">, </span>t2<span class="p">, </span>log<span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.col" title="Permalink to this definition">¶</a></dt>
<dd><p>Source collection</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.LoaderDirective.LoaderDirective.query_complement">
<code class="sig-name descname">query_complement</code><em class="property">: Optional<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.query_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to include in the query</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.t3.T2FilterModel.T2FilterModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.t3.T2FilterModel.</code><code class="sig-name descname">T2FilterModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.t3.T2FilterModel.T2FilterModel.unit">
<code class="sig-name descname">unit</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>name of T2 unit</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.t3.T2FilterModel.T2FilterModel.match">
<code class="sig-name descname">match</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to apply to most recent result</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.template.AbsLegacyChannelTemplate.</code><code class="sig-name descname">AbsLegacyChannelTemplate</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsChannelTemplate.AbsChannelTemplate</span></code></p>
<p>Abstract class whose purpose is to maintain compatibility with channel
definitions created for ampel versions &lt; 0.7.
This class must be subclassed.</p>
<p>Known subclass: <a class="reference internal" href="ampel-ztf.html#ampel.model.ZTFLegacyChannelTemplate.ZTFLegacyChannelTemplate" title="ampel.model.ZTFLegacyChannelTemplate.ZTFLegacyChannelTemplate"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZTFLegacyChannelTemplate</span></code></a></p>
<dl class="py attribute">
<dt id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.auto_complete">
<code class="sig-name descname">auto_complete</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.auto_complete" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>false: apply filter to all photopoints</p></li>
<li><p>true or “live”: bypass filter once a transient has been accepted once</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t0_filter">
<code class="sig-name descname">t0_filter</code><em class="property">: <a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t0_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter to apply to incoming datapoints</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t2_compute">
<code class="sig-name descname">t2_compute</code><em class="property">: List<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t2_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>T2 units to trigger when transient is updated</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t3_supervise">
<code class="sig-name descname">t3_supervise</code><em class="property">: List<span class="p">[</span>Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t3_supervise" title="Permalink to this definition">¶</a></dt>
<dd><p>T3 processes bound to this channel. These may be use templates, such as
<a class="reference internal" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3" title="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodicSummaryT3</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.template.PeriodicSummaryT3.FilterModel">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.template.PeriodicSummaryT3.</code><code class="sig-name descname">FilterModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.FilterModel.t2">
<code class="sig-name descname">t2</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="#ampel.model.t3.T2FilterModel.T2FilterModel" title="ampel.model.t3.T2FilterModel.T2FilterModel">ampel.model.t3.T2FilterModel.T2FilterModel</a><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf">ampel.model.operator.AllOf.AllOf</a><span class="p">[</span>T2FilterModel<span class="p">]</span><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf">ampel.model.operator.AnyOf.AnyOf</a><span class="p">[</span>T2FilterModel<span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.FilterModel.t2" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter based on T2 results</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3">
<em class="property">class </em><code class="sig-prename descclassname">ampel.model.template.PeriodicSummaryT3.</code><code class="sig-name descname">PeriodicSummaryT3</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsProcessTemplate.AbsProcessTemplate</span></code></p>
<p>A T3 process that selects stocks modified since its last invocation, and
supplies them, to a sequence of AbsT3Units.</p>
<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.name">
<code class="sig-name descname">name</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Process name.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.schedule">
<code class="sig-name descname">schedule</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Sequence<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>one or more <a class="reference external" href="https://schedule.readthedocs.io/en/stable/">schedule</a>
expressions, e.g: <code class="docutils literal notranslate"><span class="pre">every().day.at(&quot;15:00&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">every(42).minutes</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>all times are are expressed in UTC</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.channel">
<code class="sig-name descname">channel</code><em class="property">: Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf">ampel.model.operator.AllOf.AllOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf">ampel.model.operator.AnyOf.AnyOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">, </span><a class="reference internal" href="#ampel.model.operator.OneOf.OneOf" title="ampel.model.operator.OneOf.OneOf">ampel.model.operator.OneOf.OneOf</a><span class="p">[</span>typing.Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel selection.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.tag">
<code class="sig-name descname">tag</code><em class="property">: Optional[Dict[Literal[with, without], Union[int, str, Dict, ampel.model.operator.AllOf.AllOf[typing.Union[int, str]], ampel.model.operator.AnyOf.AnyOf[typing.Union[int, str]], ampel.model.operator.OneOf.OneOf[typing.Union[int, str]]]]]</em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Stock tag selection.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.load">
<code class="sig-name descname">load</code><em class="property">: Optional<span class="p">[</span>Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference internal" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="ampel.model.t3.LoaderDirective.LoaderDirective">ampel.model.t3.LoaderDirective.LoaderDirective</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Documents to load. If a string, should refer to an entry in the
<code class="docutils literal notranslate"><span class="pre">alias.t3</span></code> config section. See <a class="reference internal" href="../structure.html#t3-directive-load"><span class="std std-ref">load</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.filter">
<code class="sig-name descname">filter</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="#ampel.model.template.PeriodicSummaryT3.FilterModel" title="ampel.model.template.PeriodicSummaryT3.FilterModel">ampel.model.template.PeriodicSummaryT3.FilterModel</a><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional stock filters.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.complement">
<code class="sig-name descname">complement</code><em class="property">: Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Complement stages. See <a class="reference internal" href="../structure.html#t3-directive-complement"><span class="std std-ref">complement</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.run">
<code class="sig-name descname">run</code><em class="property">: Union<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span>Sequence<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="ampel-base.html#ampel.model.UnitModel.UnitModel" title="ampel.model.UnitModel.UnitModel">ampel.model.UnitModel.UnitModel</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Units to run. See <a class="reference internal" href="../structure.html#t3-directive-run-execute"><span class="std std-ref">execute</span></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="enums">
<h2>Enums<a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.t2.T2RunState.T2RunState">
<em class="property">class </em><code class="sig-prename descclassname">ampel.t2.T2RunState.</code><code class="sig-name descname">T2RunState</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState" title="Permalink to this definition">¶</a></dt>
<dd><p>States of a <a class="reference internal" href="ampel-base.html#ampel.content.T2Record.T2Record" title="ampel.content.T2Record.T2Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2Record</span></code></a></p>
<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.COMPLETED">
<code class="sig-name descname">COMPLETED</code><em class="property"> = 0</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.COMPLETED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.TO_RUN">
<code class="sig-name descname">TO_RUN</code><em class="property"> = -1</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.TO_RUN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.TO_RUN_PRIO">
<code class="sig-name descname">TO_RUN_PRIO</code><em class="property"> = -2</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.TO_RUN_PRIO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.QUEUED">
<code class="sig-name descname">QUEUED</code><em class="property"> = -3</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.QUEUED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.RUNNING">
<code class="sig-name descname">RUNNING</code><em class="property"> = -4</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.RUNNING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.EXPORTED">
<code class="sig-name descname">EXPORTED</code><em class="property"> = -5</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.EXPORTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.ERROR">
<code class="sig-name descname">ERROR</code><em class="property"> = -6</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.EXCEPTION">
<code class="sig-name descname">EXCEPTION</code><em class="property"> = -7</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.EXCEPTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.TOO_MANY_TRIALS">
<code class="sig-name descname">TOO_MANY_TRIALS</code><em class="property"> = -8</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.TOO_MANY_TRIALS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.UNKNOWN_LINK">
<code class="sig-name descname">UNKNOWN_LINK</code><em class="property"> = -9</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.UNKNOWN_LINK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.UNKNOWN_CONFIG">
<code class="sig-name descname">UNKNOWN_CONFIG</code><em class="property"> = -10</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.UNKNOWN_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.MISSING_DEPENDENCY">
<code class="sig-name descname">MISSING_DEPENDENCY</code><em class="property"> = -11</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.MISSING_DEPENDENCY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="ampel.t2.T2RunState.T2RunState.MISSING_INFO">
<code class="sig-name descname">MISSING_INFO</code><em class="property"> = -12</em><a class="headerlink" href="#ampel.t2.T2RunState.T2RunState.MISSING_INFO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="odds-and-ends">
<h2>Odds and ends<a class="headerlink" href="#odds-and-ends" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="ampel.log.AmpelLogger.AmpelLogger">
<em class="property">class </em><code class="sig-prename descclassname">ampel.log.AmpelLogger.</code><code class="sig-name descname">AmpelLogger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">base_flag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">handlers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">channel</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">console</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="ampel.log.AmpelLogger.AmpelLogger.get_logger">
<em class="property">classmethod </em><code class="sig-name descname">get_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">force_refresh</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or returns an instance of <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpelLogger</span></code>
that is registered in static dict ‘loggers’ using the provided name as key.
If a logger with the given name already exists, the existing logger instance is returned.
If name is None, unique (int) name will be generated
:param <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>: passed to constructor</p>
<p>Typical use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">AmpelLogger</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelLogger</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ampel.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="ampel-base.html"
                        title="previous chapter">Ampel-interface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ampel-alerts.html"
                        title="next chapter">Ampel-alerts</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ampel-alerts.html" title="Ampel-alerts"
             >next</a> |</li>
        <li class="right" >
          <a href="ampel-base.html" title="Ampel-interface"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Ampel 0.7.0a0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API documentation by project</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2020, Ampel Project contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>