
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Ampel-base &#8212; Ampel 0.4.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ampel-core" href="ampel-core.html" />
    <link rel="prev" title="Ampel projects" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ampel-core.html" title="Ampel-core"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Ampel projects"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Ampel 0.4.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Ampel projects</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ampel.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Ampel projects</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ampel-core.html"
                        title="next chapter">Ampel-core</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ampel-base">
<h1>Ampel-base<a class="headerlink" href="#ampel-base" title="Permalink to this headline">¶</a></h1>
<p>Ampel-base provides base classes for implementing Ampel processing units, as
well as the data classes that are provided as input to those units by the core.</p>
<div class="section" id="ampel-processing-units">
<h2>Ampel processing units<a class="headerlink" href="#ampel-processing-units" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter">
<em class="property">class </em><code class="descclassname">ampel.base.abstract.AbsAlertFilter.</code><code class="descname">AbsAlertFilter</code><span class="sig-paren">(</span><em>on_match_t2_units</em>, <em>base_config=None</em>, <em>run_config=None</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for T0 units</p>
<dl class="method">
<dt id="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>on_match_t2_units</em>, <em>base_config=None</em>, <em>run_config=None</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>on_match_t2_units</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – names of T2 units to run on candidates that
pass this filter</li>
<li><strong>base_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – resources configured for this unit. The keys are
the elements of <a class="reference internal" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources" title="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources"><code class="xref py py-attr docutils literal notranslate"><span class="pre">resources</span></code></a>.</li>
<li><strong>run_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]) – unit-specific settings</li>
<li><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a>]) – logger to use for reporting output</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>ampel_alert</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the candidate. Return <cite>None</cite> to drop the candidate, or the set
of T2 units to run to accept it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ampel_alert</strong> (<a class="reference internal" href="#ampel.base.AmpelAlert.AmpelAlert" title="ampel.base.AmpelAlert.AmpelAlert"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelAlert</span></code></a>) – candidate photopoint</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources">
<code class="descname">resources</code><em class="property"> = ()</em><a class="headerlink" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Named resources required by this unit. This should be overridden by
subclasses to register dependencies on local resources, e.g. URLs of
catalog database servers</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ampel.base.abstract.AbsT2Unit.AbsT2Unit">
<em class="property">class </em><code class="descclassname">ampel.base.abstract.AbsT2Unit.</code><code class="descname">AbsT2Unit</code><span class="sig-paren">(</span><em>logger</em>, <em>base_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsT2Unit.AbsT2Unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for lightcurve processing</p>
<dl class="method">
<dt id="ampel.base.abstract.AbsT2Unit.AbsT2Unit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>logger</em>, <em>base_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsT2Unit.AbsT2Unit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a>) – logger to use for reporting output</li>
<li><strong>base_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – resources configured for this unit. The keys are
the elements of <a class="reference internal" href="#ampel.base.abstract.AbsT2Unit.AbsT2Unit.resources" title="ampel.base.abstract.AbsT2Unit.AbsT2Unit.resources"><code class="xref py py-attr docutils literal notranslate"><span class="pre">resources</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="ampel.base.abstract.AbsT2Unit.AbsT2Unit.resources">
<code class="descname">resources</code><em class="property"> = ()</em><a class="headerlink" href="#ampel.base.abstract.AbsT2Unit.AbsT2Unit.resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Named resources required by this unit. See <a class="reference internal" href="#ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources" title="ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ampel.base.abstract.AbsAlertFilter.AbsAlertFilter.resources</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.abstract.AbsT2Unit.AbsT2Unit.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>light_curve</em>, <em>run_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsT2Unit.AbsT2Unit.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a lightcurve for a single transient</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary of results</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ampel.base.abstract.AbsT3Unit.AbsT3Unit">
<em class="property">class </em><code class="descclassname">ampel.base.abstract.AbsT3Unit.</code><code class="descname">AbsT3Unit</code><span class="sig-paren">(</span><em>logger</em>, <em>base_config=None</em>, <em>run_config=None</em>, <em>global_info=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsT3Unit.AbsT3Unit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ampel.base.abstract.AbsT3Unit.AbsT3Unit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>logger</em>, <em>base_config=None</em>, <em>run_config=None</em>, <em>global_info=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.abstract.AbsT3Unit.AbsT3Unit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ampel-data-classes">
<h2>Ampel data classes<a class="headerlink" href="#ampel-data-classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ampel.base.AmpelAlert.AmpelAlert">
<em class="property">class </em><code class="descclassname">ampel.base.AmpelAlert.</code><code class="descname">AmpelAlert</code><span class="sig-paren">(</span><em>tran_id</em>, <em>list_of_pps</em>, <em>list_of_uls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert" title="Permalink to this definition">¶</a></dt>
<dd><p>T0 base class containing a read-only list of read-only photopoint dictionaries.
(read-only convertion occurs in constructor).
During pipeline processing, an alert is loaded and its content used to instantiate this class. 
Then, the AmpelAlert instance is fed to every active T0 filter.</p>
<dl class="classmethod">
<dt id="ampel.base.AmpelAlert.AmpelAlert.add_class_flags">
<em class="property">classmethod </em><code class="descname">add_class_flags</code><span class="sig-paren">(</span><em>arg_flags</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.add_class_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>Set alert flags (ampel.base.flags.AmpelFlags) of this alert.
Typically: observing instrument, alert issuer.
For example: AmpelFlags.INST_ZTF | AmpelFlags.SRC_IPAC</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.apply_filter">
<code class="descname">apply_filter</code><span class="sig-paren">(</span><em>match_objs</em>, <em>filters</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.apply_filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_id">
<code class="descname">get_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_id" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the transient Id (ZTF: objectId)</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_ntuples">
<code class="descname">get_ntuples</code><span class="sig-paren">(</span><em>params</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_ntuples" title="Permalink to this definition">¶</a></dt>
<dd><p>params: list of strings
ex: instance.get_ntuples([“fid”, “obs_date”, “mag”])</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_photopoints">
<code class="descname">get_photopoints</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_photopoints" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of dicts</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_tuples">
<code class="descname">get_tuples</code><span class="sig-paren">(</span><em>param1</em>, <em>param2</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>ex: instance.get_tuples(“obs_date”, “mag”)</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_upperlimits">
<code class="descname">get_upperlimits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_upperlimits" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of dicts</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.AmpelAlert.AmpelAlert.get_values">
<code class="descname">get_values</code><span class="sig-paren">(</span><em>param_name</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>ex: instance.get_values(“mag”)</p>
</dd></dl>

<dl class="classmethod">
<dt id="ampel.base.AmpelAlert.AmpelAlert.has_flags">
<em class="property">classmethod </em><code class="descname">has_flags</code><span class="sig-paren">(</span><em>arg_flags</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.has_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>ex: AmpelAlert.has_flags(AmpelFlags.INST_ZTF)</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ampel.base.AmpelAlert.AmpelAlert.load_ztf_alert">
<em class="property">static </em><code class="descname">load_ztf_alert</code><span class="sig-paren">(</span><em>arg</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.load_ztf_alert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method.
Do not use for production!</p>
</dd></dl>

<dl class="classmethod">
<dt id="ampel.base.AmpelAlert.AmpelAlert.set_alert_keywords">
<em class="property">classmethod </em><code class="descname">set_alert_keywords</code><span class="sig-paren">(</span><em>alert_keywords</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.AmpelAlert.AmpelAlert.set_alert_keywords" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Set using ampel config values. For ZTF IPAC alerts:</dt>
<dd><div class="first last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">alert_keywords</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;transient_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;objectId&quot;</span><span class="p">,</span>
        <span class="s2">&quot;photopoint_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;candid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;obs_date&quot;</span> <span class="p">:</span> <span class="s2">&quot;jd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;filter_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;fid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mag&quot;</span> <span class="p">:</span> <span class="s2">&quot;magpsf&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ampel.base.LightCurve.LightCurve">
<em class="property">class </em><code class="descclassname">ampel.base.LightCurve.</code><code class="descname">LightCurve</code><span class="sig-paren">(</span><em>compound_id</em>, <em>ppo_list</em>, <em>ulo_list=None</em>, <em>info=None</em>, <em>read_only=True</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing a collection of PhotoPoint/UpperLimit instances.
And a few convenience methods to return values embedded in the collection.
(This object has several similarities with AmpelAlert and yet some notable differences.
If time allows, a possible object oriented parent/child structure could be tested, 
whereby it is important to keep in mind that AmpelAlert efficiency is an important 
criteria since <em>every</em> ZTF alert yields an AmpelAlert obj).</p>
<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_ntuples">
<code class="descname">get_ntuples</code><span class="sig-paren">(</span><em>params</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_ntuples" title="Permalink to this definition">¶</a></dt>
<dd><p>params: list of strings
ex: instance.get_ntuples([“fid”, “obs_date”, “mag”])
‘filters’ example: {‘attribute’: ‘magpsf’, ‘operator’: ‘&lt;’, ‘value’: 18}
‘upper_limits’: if set to True, upper limits are returned instead of photopoints</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_photopoints">
<code class="descname">get_photopoints</code><span class="sig-paren">(</span><em>filters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_photopoints" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of dicts</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_pos">
<code class="descname">get_pos</code><span class="sig-paren">(</span><em>ret='brightest'</em>, <em>filters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_pos" title="Permalink to this definition">¶</a></dt>
<dd><p>ret (for all methods, only matching PhotoPoint wrt the provided filter(s) are used!):
“raw”: returns ((ra, dec), (ra, dec), …)
“mean”: returns (&lt;ra&gt;, &lt;dec&gt;)
“brightest”: returns (ra, dec)
“latest”: returns (ra, dec)</p>
<p>examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span><span class="o">.</span><span class="n">get_pos</span><span class="p">(</span>
        <span class="s2">&quot;brightest&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="s1">&#39;alFlags&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">PhotoFlags</span><span class="o">.</span><span class="n">ZTF_G</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>returns the position of the brightest PhotoPoint in the ZTF G band</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span><span class="o">.</span><span class="n">get_pos</span><span class="p">(</span><span class="s2">&quot;lastest&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="s1">&#39;magpsf&#39;</span><span class="p">,</span> <span class="s1">&#39;operator&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">})</span>
</pre></div>
</div>
<p>returns the position of the latest PhotoPoint in time with a magnitude brighter than 18
(or an empty array if no PhotoPoint matches this criteria)</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_tuples">
<code class="descname">get_tuples</code><span class="sig-paren">(</span><em>field1_name</em>, <em>field2_name</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>ex: instance.get_values(‘obs_date’, ‘mag’)
‘filters’ example: {‘attribute’: ‘magpsf’, ‘operator’: ‘&lt;’, ‘value’: 18}
‘upper_limits’: if set to True, upper limits are returned instead of photopoints</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_upperlimits">
<code class="descname">get_upperlimits</code><span class="sig-paren">(</span><em>filters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_upperlimits" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of dicts</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.LightCurve.LightCurve.get_values">
<code class="descname">get_values</code><span class="sig-paren">(</span><em>field_name</em>, <em>filters=None</em>, <em>upper_limits=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.LightCurve.LightCurve.get_values" title="Permalink to this definition">¶</a></dt>
<dd><p>ex: instance.get_values(‘obs_date’)
‘filters’ example: {‘attribute’: ‘magpsf’, ‘operator’: ‘&lt;’, ‘value’: 18}
‘upper_limits’: if set to True, upper limits are returned instead of photopoints</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ampel.base.ScienceRecord.ScienceRecord">
<em class="property">class </em><code class="descclassname">ampel.base.ScienceRecord.</code><code class="descname">ScienceRecord</code><span class="sig-paren">(</span><em>tran_id</em>, <em>t2_unit_id</em>, <em>compound_id</em>, <em>results</em>, <em>info=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.ScienceRecord.ScienceRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>tran_id: transient id
t2_unit_id: T2 unit id
compound_id: Compound id
results: T2 unit return values
info: extra info</p>
<dl class="method">
<dt id="ampel.base.ScienceRecord.ScienceRecord.get_compound_id">
<code class="descname">get_compound_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.ScienceRecord.ScienceRecord.get_compound_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.ScienceRecord.ScienceRecord.get_results">
<code class="descname">get_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.ScienceRecord.ScienceRecord.get_results" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.ScienceRecord.ScienceRecord.get_t2_unit_id">
<code class="descname">get_t2_unit_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.ScienceRecord.ScienceRecord.get_t2_unit_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.ScienceRecord.ScienceRecord.has_error">
<code class="descname">has_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.ScienceRecord.ScienceRecord.has_error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ampel.base.TransientView.TransientView">
<em class="property">class </em><code class="descclassname">ampel.base.TransientView.</code><code class="descname">TransientView</code><span class="sig-paren">(</span><em>tran_id</em>, <em>flags</em>, <em>journal</em>, <em>latest_state=None</em>, <em>photopoints=None</em>, <em>upperlimits=None</em>, <em>compounds=None</em>, <em>lightcurves=None</em>, <em>t2records=None</em>, <em>channel=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView" title="Permalink to this definition">¶</a></dt>
<dd><p>Container class referencing various instances of objects:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.PlainPhotoPoint.PlainPhotoPoint</span></code></li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.PlainUpperLimit.PlainUpperLimit</span></code></li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.Compound.Compound</span></code></li>
<li><a class="reference internal" href="#ampel.base.LightCurve.LightCurve" title="ampel.base.LightCurve.LightCurve"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.LightCurve.LightCurve</span></code></a></li>
<li><a class="reference internal" href="#ampel.base.ScienceRecord.ScienceRecord" title="ampel.base.ScienceRecord.ScienceRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.ScienceRecord.ScienceRecord</span></code></a></li>
</ul>
<p>Instances of this class are provided to T3 modules and are typically 
generated using a TransientData instance created by DBContentLoader.</p>
<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_compound">
<code class="descname">get_compound</code><span class="sig-paren">(</span><em>compound_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_compound" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of MappingProxyType or None if no Compound exists with the provided id
lightcurve_id: either a bson Binary instance (with subtype 5) or a string with length 32</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_compounds">
<code class="descname">get_compounds</code><span class="sig-paren">(</span><em>copy=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_compounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of MappingProxyType instances or None if Compounds were not loaded</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_flags">
<code class="descname">get_flags</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_flags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_journal_entries">
<code class="descname">get_journal_entries</code><span class="sig-paren">(</span><em>tier=None</em>, <em>t3JobName=None</em>, <em>latest=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_journal_entries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_latest_lightcurve">
<code class="descname">get_latest_lightcurve</code><span class="sig-paren">(</span><em>logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_latest_lightcurve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_latest_state">
<code class="descname">get_latest_state</code><span class="sig-paren">(</span><em>to_hex=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_latest_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_lightcurve">
<code class="descname">get_lightcurve</code><span class="sig-paren">(</span><em>lightcurve_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_lightcurve" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of ampel.base.LightCurve 
or None if no LightCurve exists with the provided lightcurve_id
lightcurve_id: either a bson Binary instance (with subtype 5) or a string with length 32</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_lightcurves">
<code class="descname">get_lightcurves</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_lightcurves" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of ampel.base.LightCurve instances or None if Compounds were not loaded</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_photopoints">
<code class="descname">get_photopoints</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_photopoints" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlainPhotoPoint</span></code>]]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a dict of photopoint ids and photopoints, or None if photopoints were not loaded</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_science_records">
<code class="descname">get_science_records</code><span class="sig-paren">(</span><em>t2_unit_id=None</em>, <em>latest=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_science_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance or a tuple of instances of ampel.base.ScienceRecord 
t2_unit_id: string. Limit returned science record(s) to the one with the provided t2 unit id
latest: boolean. Whether to return the latest science record(s) or not</p>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_time_created">
<code class="descname">get_time_created</code><span class="sig-paren">(</span><em>format_time=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_time_created" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_time_modified">
<code class="descname">get_time_modified</code><span class="sig-paren">(</span><em>format_time=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_time_modified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.get_upperlimits">
<code class="descname">get_upperlimits</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.get_upperlimits" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlainUpperLimit</span></code>]]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a dict of upper limit ids and upper limits, or None if upper limits were not loaded</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ampel.base.TransientView.TransientView.serialize">
<code class="descname">serialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ampel.base.TransientView.TransientView.serialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ampel-core.html" title="Ampel-core"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Ampel projects"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Ampel 0.4.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Ampel projects</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Ampel Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>