
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Ampel-core &#8212; ampel-core 0.8.7a1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Porting contrib projects from v0.6" href="legacy.html" />
    <link rel="prev" title="Structure" href="structure.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.8.7a1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="ampel-core">
<h1>Ampel-core<a class="headerlink" href="#ampel-core" title="Permalink to this heading">¶</a></h1>
<p>The actual implementation of the Ampel framework</p>
<section id="processing-units">
<h2>Processing units<a class="headerlink" href="#processing-units" title="Permalink to this heading">¶</a></h2>
</section>
<section id="base-classes-for-processing-units">
<h2>Base classes for processing units<a class="headerlink" href="#base-classes-for-processing-units" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.ContextUnit.ContextUnit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.core.ContextUnit.</span></span><span class="sig-name descname"><span class="pre">ContextUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/ContextUnit.html#ContextUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.ContextUnit.ContextUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for units requiring a reference to an AmpelContext instance</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.abstract.AbsEventUnit.</span></span><span class="sig-name descname"><span class="pre">AbsEventUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/abstract/AbsEventUnit.html#AbsEventUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for units orchestrating an ampel event.
Ampel processes (from the ampel config) are the most common events.
They define specifications of an event using a standardized model/schema:
which subclass of this abstract class is to be run by a given controller
at (a) given time(s) using a specific configuration.</p>
<p>An ampel event must be registered and traceable and thus generates:
- a new run-id
- a new event document (in the event collection)
- possibly Log entries (less is better)
- new trace ids if not registered previously</p>
<p>Subclassses of this class typically modify tier documents
whereby the changes originate from results of logical unit(s)
instantiated by this class.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.process_name">
<span class="sig-name descname"><span class="pre">process_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotated</span></code><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.process_name" title="Permalink to this definition">¶</a></dt>
<dd><p>name of the associated process</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.job_sig">
<span class="sig-name descname"><span class="pre">job_sig</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.job_sig" title="Permalink to this definition">¶</a></dt>
<dd><p>hash of potentially underlying job schema</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]],</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>channels associated with the process</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.raise_exc">
<span class="sig-name descname"><span class="pre">raise_exc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.raise_exc" title="Permalink to this definition">¶</a></dt>
<dd><p>raise exceptions instead of catching and logging
if True, troubles collection will not be populated if an exception occurs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.log_profile">
<span class="sig-name descname"><span class="pre">log_profile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'default'</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.log_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>logging configuration to use, from the logging section of the Ampel config</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.base_log_flag">
<span class="sig-name descname"><span class="pre">base_log_flag</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">LogFlag</span></code></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">16</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.base_log_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>flag to apply to all log records created</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.db_handler_kwargs">
<span class="sig-name descname"><span class="pre">db_handler_kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a><span class="pre">]]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.db_handler_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>optional additional kwargs to pass to <code class="xref py py-class docutils literal notranslate"><span class="pre">DBLoggingHandler</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.provenance">
<span class="sig-name descname"><span class="pre">provenance</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.provenance" title="Permalink to this definition">¶</a></dt>
<dd><p>Some subclasses allow for non-serializable input parameter out of convenience (jupyter notebooks).
For example, an AlertSupplier instance can be passed as argument of an AlertConsumer.
Unless a custom serialization is implemented, this disables the hashing of input parameters
and thus the generation of “trace ids”.
Set provenance to False to ignore trace ids generation error which will be raised otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.abstract.AbsEventUnit.AbsEventUnit.prepare">
<span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_hdlr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/abstract/AbsEventUnit.html#AbsEventUnit.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.abstract.AbsEventUnit.AbsEventUnit.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives units the opportunity to cancel the subsequent call to the proceed() method
by returning EventCode.PRE_CHECK_EXIT (which avoids ‘burning’ a run id)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">EventCode</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="processor-units">
<h2>Processor units<a class="headerlink" href="#processor-units" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.T3Processor.T3Processor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.t3.T3Processor.</span></span><span class="sig-name descname"><span class="pre">T3Processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/T3Processor.html#T3Processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.abstract.AbsEventUnit.AbsEventUnit" title="ampel.abstract.AbsEventUnit.AbsEventUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbsEventUnit</span></code></a></p>
</dd></dl>

</section>
<section id="t3-machinery">
<h2>T3 machinery<a class="headerlink" href="#t3-machinery" title="Permalink to this heading">¶</a></h2>
</section>
<section id="context-and-configuration">
<h2>Context and configuration<a class="headerlink" href="#context-and-configuration" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.core.AmpelContext.</span></span><span class="sig-name descname"><span class="pre">AmpelContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is typically instantiated by Ampel controllers
and provided to “processor unit” instances.
Note: this class might in the future be capable
of handling multiple AmpelConfig/AmpelDB instances</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd_file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vault</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">one_db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) – local path to an ampel config file (yaml or json) or loaded config as dict</p></li>
<li><p><strong>pwd_file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – path to a text file containing one password per line.</p></li>
</ul>
</dd>
</dl>
<p>The underlying AmpelVault will be initialized with an AESecretProvider configured with these pwds.
:type pwds: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]
:param pwds: Same as ‘pwd_file_path’ except a list of passwords is provided directly via this parameter.
:type freeze_config: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>
:param freeze_config:</p>
<blockquote>
<div><p>whether to convert the elements contained of ampel config
into immutable structures (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> -&gt;
<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.view.ReadOnlyDict.ReadOnlyDict" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadOnlyDict</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> -&gt; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>).
Parameter does only apply if the config is loaded by this method, i.e if parameter ‘config’ is a str.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.build">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd_file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<p>The required underlying ampel configuration (<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.config.AmpelConfig.AmpelConfig" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a>) is built from scratch,
meaning all available configurations defined in the various ampel repositories available locally
are collected, merged merged together and morphed the info into the final ampel config.
This is a convenience method, do not use for production</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.new_run_id">
<span class="sig-name descname"><span class="pre">new_run_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.new_run_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.new_run_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identifier that can be used to associate log entries from a
single process invocation. This ID is unique and monotonicaly increasing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.get_config">
<span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.get_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_config" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, AmpelContext might hold references to multiple different config</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.config.AmpelConfig.AmpelConfig" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.get_database">
<span class="sig-name descname"><span class="pre">get_database</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.get_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_database" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, this class might hold references to multiple different databases</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelDB</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.activate_process">
<span class="sig-name descname"><span class="pre">activate_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.activate_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.activate_process" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>False if process was deactivated, True if not found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.core.UnitLoader.</span></span><span class="sig-name descname"><span class="pre">UnitLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">provenance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vault</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new_logical_unit">
<span class="sig-name descname"><span class="pre">new_logical_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new_logical_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_logical_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Logical units require logger and resource as init parameters, additionaly to the potentialy
defined custom parameters which will be provided as a union of the model config
and the kwargs provided to this method (the latter having prevalance)
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">LT</span></code>, bound= <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.LogicalUnit.LogicalUnit" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogicalUnit</span></code></a>), <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.LogicalUnit.LogicalUnit" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogicalUnit</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new_safe_logical_unit">
<span class="sig-name descname"><span class="pre">new_safe_logical_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">um</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_chan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new_safe_logical_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_safe_logical_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a logical unit with dedicated logger containing no db handler</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">LT</span></code>, bound= <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.LogicalUnit.LogicalUnit" title="(in ampel-interface v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogicalUnit</span></code></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new_context_unit">
<span class="sig-name descname"><span class="pre">new_context_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new_context_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_context_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Context units require an AmpelContext instance as init parameters, additionaly to
potentialy defined dedicated custom parameters.
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">CT</span></code>, bound= <a class="reference internal" href="#ampel.core.ContextUnit.ContextUnit" title="ampel.core.ContextUnit.ContextUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextUnit</span></code></a>), <a class="reference internal" href="#ampel.core.ContextUnit.ContextUnit" title="ampel.core.ContextUnit.ContextUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextUnit</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new">
<span class="sig-name descname"><span class="pre">new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate new object based on provided model and kwargs.
:param ‘unit_type’: performs isinstance check and raise error on mismatch. Enables mypy/other static checks.
:rtype: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelUnit</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">T</span></code>, bound= <code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelUnit</span></code>)]
:returns: unit instance, trace id (0 if not computable)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_class_by_name">
<span class="sig-name descname"><span class="pre">get_class_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_class_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_class_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches the parameter ‘name’ with the unit definitions defined in the ampel_config.
This allows to retrieve the corresponding fully qualified name of the class and to load it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>unit_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">T</span></code>, bound= <code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelUnit</span></code>)]]) – <ul class="simple">
<li><p>LogicalUnit or any sublcass of LogicalUnit</p></li>
<li><p>ContextUnit or any sublcass of ContextUnit</p></li>
<li><p>If None (auxiliary class), returned object will have type[Any]</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>ValueError if unit cannot be found or loaded or if parent class is unrecognized</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">T</span></code>, bound= <code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelUnit</span></code>), <code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelUnit</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_init_config">
<span class="sig-name descname"><span class="pre">get_init_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unfreeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_init_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_init_config" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>ValueError if config alias is not found</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.resolve_aliases">
<span class="sig-name descname"><span class="pre">resolve_aliases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.resolve_aliases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively resolve aliases from config</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.resolve_secrets">
<span class="sig-name descname"><span class="pre">resolve_secrets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.resolve_secrets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a resolved Secret instance to init_kwargs for every Secret field of
unit_type.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_resources">
<span class="sig-name descname"><span class="pre">get_resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Resources are defined using the static variable ‘require’ in ampel units
-&gt; example: catsHTM.default</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.validate_unit_models">
<span class="sig-name descname"><span class="pre">validate_unit_models</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.validate_unit_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.validate_unit_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable validation for UnitModel instances</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="data-classes">
<h2>Data classes<a class="headerlink" href="#data-classes" title="Permalink to this heading">¶</a></h2>
</section>
<section id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.AnyOf.AnyOf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.AnyOf.</span></span><span class="sig-name descname"><span class="pre">AnyOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/AnyOf.html#AnyOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.operator.AnyOf.AnyOf.any_of">
<span class="sig-name descname"><span class="pre">any_of</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a><span class="pre">(</span><code class="docutils literal notranslate"><span class="pre">T</span></code><span class="pre">),</span> <a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><code class="xref py py-class docutils literal notranslate"><span class="pre">AllOf</span></code></a><span class="pre">]]</span></em><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf.any_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical OR</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.AllOf.AllOf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.AllOf.</span></span><span class="sig-name descname"><span class="pre">AllOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/AllOf.html#AllOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.operator.AllOf.AllOf.all_of">
<span class="sig-name descname"><span class="pre">all_of</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a><span class="pre">(</span><code class="docutils literal notranslate"><span class="pre">T</span></code><span class="pre">)]</span></em><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf.all_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical AND</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.OneOf.OneOf">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.OneOf.</span></span><span class="sig-name descname"><span class="pre">OneOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/OneOf.html#OneOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.OneOf.OneOf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeConstraintModel.</span></span><span class="sig-name descname"><span class="pre">TimeConstraintModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeConstraintModel.html#TimeConstraintModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_delta&quot;</span><span class="p">,</span>
            <span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeStr&quot;</span><span class="p">:</span> <span class="s2">&quot;21/11/06 16:30&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%y %H:%M&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_last_run&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;val_test&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unix_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1531306299</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.before">
<span class="sig-name descname"><span class="pre">before</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeDeltaModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeLastRunModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeStringModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnixTimeModel</span></code></a><span class="pre">]]</span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.before" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.after">
<span class="sig-name descname"><span class="pre">after</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeDeltaModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeLastRunModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeStringModel</span></code></a><span class="pre">,</span> <a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnixTimeModel</span></code></a><span class="pre">]]</span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.after" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model">
<span class="sig-name descname"><span class="pre">get_query_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeConstraintModel.html#TimeConstraintModel.get_query_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this method with db=&lt;instance of AmpelDB&gt;
if your time constraint is based on TimeLastRunModel</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">QueryTimeModel</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeDeltaModel.</span></span><span class="sig-name descname"><span class="pre">TimeDeltaModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeDeltaModel.html#TimeDeltaModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'time_delta'</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.days">
<span class="sig-name descname"><span class="pre">days</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds">
<span class="sig-name descname"><span class="pre">seconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds">
<span class="sig-name descname"><span class="pre">microseconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds">
<span class="sig-name descname"><span class="pre">milliseconds</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes">
<span class="sig-name descname"><span class="pre">minutes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours">
<span class="sig-name descname"><span class="pre">hours</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks">
<span class="sig-name descname"><span class="pre">weeks</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeDeltaModel.html#TimeDeltaModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeLastRunModel.</span></span><span class="sig-name descname"><span class="pre">TimeLastRunModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeLastRunModel.html#TimeLastRunModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'time_last_run'</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name">
<span class="sig-name descname"><span class="pre">process_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback">
<span class="sig-name descname"><span class="pre">fallback</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success">
<span class="sig-name descname"><span class="pre">require_success</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeLastRunModel.html#TimeLastRunModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeStringModel.</span></span><span class="sig-name descname"><span class="pre">TimeStringModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeStringModel.html#TimeStringModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'time_string'</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr">
<span class="sig-name descname"><span class="pre">dateTimeStr</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat">
<span class="sig-name descname"><span class="pre">dateTimeFormat</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeStringModel.html#TimeStringModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.UnixTimeModel.</span></span><span class="sig-name descname"><span class="pre">UnixTimeModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/UnixTimeModel.html#UnixTimeModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'unix_time'</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.value">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/UnixTimeModel.html#UnixTimeModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.t3.LoaderDirective.</span></span><span class="sig-name descname"><span class="pre">LoaderDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><span class="pre">Literal</span></a><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'stock'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'t0'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'t1'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'t2'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.11)"><span class="pre">type</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_complement</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve_config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excluding_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/t3/LoaderDirective.html#LoaderDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of documents to load</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.col">
<span class="sig-name descname"><span class="pre">col</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'stock'</span></code><span class="pre">,</span> <code class="docutils literal notranslate"><span class="pre">'t0'</span></code><span class="pre">,</span> <code class="docutils literal notranslate"><span class="pre">'t1'</span></code><span class="pre">,</span> <code class="docutils literal notranslate"><span class="pre">'t2'</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.col" title="Permalink to this definition">¶</a></dt>
<dd><p>Source collection</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.query_complement">
<span class="sig-name descname"><span class="pre">query_complement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a><span class="pre">]]</span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.query_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to include in the query</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.resolve_config">
<span class="sig-name descname"><span class="pre">resolve_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.resolve_config" title="Permalink to this definition">¶</a></dt>
<dd><p>whether to replace init config integer hash with ‘resolved’ config dict</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.excluding_query">
<span class="sig-name descname"><span class="pre">excluding_query</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.excluding_query" title="Permalink to this definition">¶</a></dt>
<dd><p>whether an emtpy find() result should discard entirely the associated stock for further processing</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.t3.T2FilterModel.</span></span><span class="sig-name descname"><span class="pre">T2FilterModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/t3/T2FilterModel.html#T2FilterModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>name of T2 unit</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel.match">
<span class="sig-name descname"><span class="pre">match</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to apply to most recent result</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestDirective.IngestDirective">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.IngestDirective.</span></span><span class="sig-name descname"><span class="pre">IngestDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/IngestDirective.html#IngestDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.IngestDirective.IngestDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>channel
filter
ingest</p>
<blockquote>
<div><p>stock_t2
point_t2        &lt;- based on input dps list
combine         &lt;- same</p>
<blockquote>
<div><p>state_t2      &lt;- based on dps list returned by combine
point_t2      &lt;- same</p>
</div></blockquote>
<dl class="simple">
<dt>mux             &lt;- based on input dps list</dt><dd><dl class="simple">
<dt>insert</dt><dd><p>point_t2    &lt;- based on &lt;datapoints insert&gt; result from muxer (first list)</p>
</dd>
<dt>combine</dt><dd><p>state_t2    &lt;- based on &lt;datapoints combine&gt; result from muxer (second list)
point_t2    &lt;- same</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestDirective.IngestDirective.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">,</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.ingest.IngestDirective.IngestDirective.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel for which to create documents</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestDirective.IngestDirective.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterModel</span></code><span class="pre">]</span></em><a class="headerlink" href="#ampel.model.ingest.IngestDirective.IngestDirective.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Potientially filter input datapoints</p>
</dd></dl>

</dd></dl>

</section>
<section id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this heading">¶</a></h2>
</section>
<section id="odds-and-ends">
<h2>Odds and ends<a class="headerlink" href="#odds-and-ends" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.log.AmpelLogger.AmpelLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.log.AmpelLogger.</span></span><span class="sig-name descname"><span class="pre">AmpelLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handlers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">console</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/log/AmpelLogger.html#AmpelLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="ampel.log.AmpelLogger.AmpelLogger.get_logger">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/log/AmpelLogger.html#AmpelLogger.get_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or returns an instance of <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpelLogger</span></code>
that is registered in static dict ‘loggers’ using the provided name as key.
If a logger with the given name already exists, the existing logger instance is returned.
If name is None, unique (int) name will be generated
:param <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>: passed to constructor</p>
<p>Typical use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">AmpelLogger</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelLogger</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampel.core.AmpelRegister.</span></span><span class="sig-name descname"><span class="pre">AmpelRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">autoload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister" title="Permalink to this definition">¶</a></dt>
<dd><p># noqa: E101</p>
<section id="general-notes">
<h3>General notes:<a class="headerlink" href="#general-notes" title="Permalink to this heading">¶</a></h3>
<p>An ampel register file is made of three parts: signature, header and content</p>
<p>1) The file signature is encoded in the first 11 bytes.
The signature contains the header’s length and size (3 bytes each)</p>
<p>2) A BSON encoded dict is saved in the next x bytes, refered to as the file’s header.
The header can be updated independently of the register’s content.
The size of the header is customizable during file creation.</p>
<p>3) The register’s content is usually a compressed structure (zip, bzip or xz)
which stores information in binary format. Compression can be turned off if so whished.
(The size of a register containing 10 millions alert ids [8 bytes] and filter
return code [1 byte] can be reduced from ~90MB to ~50MB using gzip with default settings).</p>
</section>
<section id="properties">
<h3>Properties:<a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Registers can be re-opened and appended</p></li>
<li><p>Header content can be accessed or updated independently of the register’s content.</p></li>
<li><p>Header updates are fast if enough space was reserved for updates in the first place.</p></li>
<li><p>Header size can be increased afterwards at the cost of having to rewrite the entire file once.
This happens automatically when needed.</p></li>
<li><p>Logging read and write access to the register content into the register header is supported</p></li>
<li><p>Registers can be capped (based on max content length or max number of run ids).
Once the limit is reached, the full register is renamed and a new one is created.</p></li>
</ul>
<p>Note: the module ampel.util.register contains tools to manually change ampel registers, such as:
<cite>get_header_content</cite>, <cite>open_file_and_write_header</cite> and <cite>rescale_header</cite></p>
</section>
<section id="target-file">
<h3>Target file:<a class="headerlink" href="#target-file" title="Permalink to this heading">¶</a></h3>
<dl class="field-list">
<dt class="field-odd">param path_base<span class="colon">:</span></dt>
<dd class="field-odd"><p>the base folder path where to create/read register files.</p>
</dd>
<dt class="field-even">param path_extra<span class="colon">:</span></dt>
<dd class="field-even"><p>an optional additional folder path (or paths) to be appended to <cite>path_base</cite>.</p>
</dd>
<dt class="field-odd">param full_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>when provided, all path building options will be ignored and a new
file handle will be opened using the provided full_path</p>
</dd>
<dt class="field-even">param file_handle<span class="colon">:</span></dt>
<dd class="field-even"><p>if you provide a file handle to a register file (parameter file handle),
it will be used and all path options will be ignored.</p>
</dd>
<dt class="field-odd">param file_cap<span class="colon">:</span></dt>
<dd class="field-odd"><p>registers can be capped, typically based on a maximum number of blocks.
When access to a full register is requested, the original file is renamed and a new register is created.
During files renames, an index is appended (suffix) to the original file name.
The current (newest) register file always comes without index suffix.
This index is saved into the current register header.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span> <span class="p">(</span><span class="n">current</span> <span class="o">-</span> <span class="n">newest</span><span class="p">)</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="mf">.1</span> <span class="p">(</span><span class="n">first</span> <span class="n">renamed</span> <span class="n">register</span> <span class="o">-</span> <span class="n">oldest</span><span class="p">)</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="mf">.2</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="mf">.3</span> <span class="p">(</span><span class="n">second</span> <span class="n">newest</span><span class="p">)</span>
</pre></div>
</div>
<p>Note1: file renames occur during the opening procedure of registers, no check is performed during the filling of registers
once a register is opened. A register can thus grow beyond the defined limit as long as a process keeps it open.</p>
</dd>
</dl>
</section>
<section id="header">
<h3>Header:<a class="headerlink" href="#header" title="Permalink to this heading">¶</a></h3>
<p>Limitations:</p>
<ul class="simple">
<li><p>The maximum space reservable for the header is 2**24 bytes, i.e ~16MB.</p></li>
<li><p>integers cannot exceed 2**63 bits. Should you need to save bigger numbers,
please use the methods bindata_to_int, int_to_bindata from module ampel.util.bson</p></li>
</ul>
<dl class="field-list">
<dt class="field-odd">param new_header_size<span class="colon">:</span></dt>
<dd class="field-odd"><p>either None, or an integer or a string (please read the note above).</p>
<ul class="simple">
<li><p>None or 0: the header block size will equal the header encoded length. Choose this option if
the header is not meant to be updated later. Otherwise, updates will only be possible if the header size
does not grow (note that there is a margin allowed since header exceeding the limit are automatically
compressed using zlib and written to disk if the size condition is then fullfilled).</p></li>
<li><p>integer number: the header will be allocated the specified number of bytes (for example 4096).</p></li>
<li><p>a string: refers to a ‘header margin’ and must start with the character ‘+’.
This option can save space in some circumstances. The header space allocated for the header will equal
the length of the initial header (including all provided options such as <cite>header_extra</cite>) to which
the specified header margin will be added. For example, ‘+1024’ means that 1024 bytes will be
allocated additionally to the initial header lengths for future updates. If the initial header length
is 100 bytes, then a header block of 1124 bytes will be created.</p></li>
</ul>
</dd>
<dt class="field-even">param header_extra<span class="colon">:</span></dt>
<dd class="field-even"><p>any extra to be included in the header under the key ‘extra’ (must be bson encodable)</p>
</dd>
<dt class="field-odd">param header_extra_base<span class="colon">:</span></dt>
<dd class="field-odd"><p>any extra to be included in the header at root depth (must be bson encodable)</p>
</dd>
<dt class="field-even">param header_update_anyway<span class="colon">:</span></dt>
<dd class="field-even"><p>if no update to the register is made, the default setting is that the
header is not updated. This settings forces header updates. For example, you might want
to save all run ids into the header whether or not they changed the content of the register.</p>
</dd>
<dt class="field-odd">param header_log_accesses<span class="colon">:</span></dt>
<dd class="field-odd"><p>if True, timestamps will be recorded each time the register is opened/closed
along with the amount of new blocks appended to the register.</p>
<p>Note 1: parameter <cite>new_header_size</cite> must be set when using this value.
Note 2: see docstring of paramter <cite>header_update_anyway</cite> that affects the behavior of this parameter.</p>
<p>In the following example, <cite>header_log_accesses</cite> is responsible for creating/updating the key ‘updated’:</p>
</dd>
</dl>
<dl>
<dt>“ts”: {</dt><dd><blockquote>
<div><p>“created”: 1590506868.3880599,
“updated”: [</p>
<blockquote>
<div><p>[1590506868.3880599, 1590509029.389, 1200],
[1590507152.079873, 1590507295.080478, 2300]</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>]</dt><dd><p>}</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="errors">
<h3>Errors:<a class="headerlink" href="#errors" title="Permalink to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>ValueError, FileNotFoundError</p>
</dd>
</dl>
<ul class="simple">
<li><p>if neither <cite>file_handle</cite>, <cite>full_path</cite>, <cite>path_base</cite> exist.</p></li>
<li><p>if read access to a non-existing file is requested</p></li>
<li><p>if the target file is not a register file (existing empty files are ok)</p></li>
<li><p>if the ‘struct’ parameter of sub-class of this class differs with the values registered
in the file’s header (this behavior can be deactivated from parameter <cite>on_exist_check</cite>)</p></li>
<li><p>during file renames (in case capped registers are used) if the target file already exists</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_base">
<span class="sig-name descname"><span class="pre">path_base</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_base" title="Permalink to this definition">¶</a></dt>
<dd><p>save files in &lt;path_base&gt;/&lt;file&gt;</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_extra">
<span class="sig-name descname"><span class="pre">path_extra</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_extra" title="Permalink to this definition">¶</a></dt>
<dd><p>save files in &lt;path_base&gt;/&lt;path_extra(s)&gt;/&lt;file&gt;</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.file_prefix">
<span class="sig-name descname"><span class="pre">file_prefix</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.file_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>prefix for each file</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_full">
<span class="sig-name descname"><span class="pre">path_full</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_full" title="Permalink to this definition">¶</a></dt>
<dd><p>ignore all other path options and use this file path</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.file_handle">
<span class="sig-name descname"><span class="pre">file_handle</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BinaryIO</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.file_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>use existing file handle</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.compression">
<span class="sig-name descname"><span class="pre">compression</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a><span class="pre">[</span><code class="docutils literal notranslate"><span class="pre">'gz'</span></code><span class="pre">,</span> <code class="docutils literal notranslate"><span class="pre">'bz2'</span></code><span class="pre">,</span> <code class="docutils literal notranslate"><span class="pre">'xz'</span></code><span class="pre">]]</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gz'</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.compression" title="Permalink to this definition">¶</a></dt>
<dd><p>compression scheme</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.compression_level">
<span class="sig-name descname"><span class="pre">compression_level</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.compression_level" title="Permalink to this definition">¶</a></dt>
<dd><p>compression level</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.check_rename">
<span class="sig-name descname"><span class="pre">check_rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.check_rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.check_rename" title="Permalink to this definition">¶</a></dt>
<dd><p>override if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.onload_update_header">
<span class="sig-name descname"><span class="pre">onload_update_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.onload_update_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.onload_update_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Override if you need to update the header of an existing register.
Ex: BaseAlertRegister adds the current run id</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.get_file_path">
<span class="sig-name descname"><span class="pre">get_file_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.get_file_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.get_file_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raise<span class="colon">:</span></dt>
<dd class="field-odd"><p>errors if sub-directories cannot be created</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.get_file_name">
<span class="sig-name descname"><span class="pre">get_file_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.get_file_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.get_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>override if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.check_header">
<span class="sig-name descname"><span class="pre">check_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.check_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.check_header" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>ValueError is raised on mismatch between this instance value</p>
</dd>
</dl>
<p>and the header value for the provided key
:rtype: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.register_file_access">
<span class="sig-name descname"><span class="pre">register_file_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_this_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.register_file_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.register_file_access" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]) – use provided header rather than self.header[‘payload’]</p></li>
<li><p><strong>use_this_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]) – use provided time rather than time.time()</p></li>
<li><p><strong>new_blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – None (default) when register is opened, 0 or an integer when register is closed</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.gen_new_header">
<span class="sig-name descname"><span class="pre">gen_new_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.gen_new_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.gen_new_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new header and create instance variable self.header to reference it.
:rtype: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>
:returns: bson encoded bytes representing the generated header
:raises: ValueError if the generated header size exceeds user-provided bound parameters</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_outer_fh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.close" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>close_outer_fh</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether principal file handle should be closed</p></li>
<li><p><strong>update_header</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – possible overidde of default settings</p></li>
</ul>
</dd>
</dl>
<p>(aimed for admins working with command line)</p>
</dd></dl>

</section>
</dd></dl>

</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ampel.png" alt="Logo"/>
            </a></p>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="structure.html"
                          title="previous chapter">Structure</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="legacy.html"
                          title="next chapter">Porting contrib projects from v0.6</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             >next</a> |</li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.8.7a1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2021, Ampel Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
    </div>
  </body>
</html>