
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ampel-core &#8212; ampel-core 0.7.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Porting contrib projects from v0.6" href="legacy.html" />
    <link rel="prev" title="Structure" href="structure.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ampel-core">
<h1>Ampel-core<a class="headerlink" href="#ampel-core" title="Permalink to this headline">¶</a></h1>
<p>The actual implementation of the Ampel framework</p>
<div class="section" id="processing-units">
<h2>Processing units<a class="headerlink" href="#processing-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.context.T3AddLastRunTime.</span></span><span class="sig-name descname"><span class="pre">T3AddLastRunTime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/T3AddLastRunTime.html#T3AddLastRunTime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.lookup_range">
<span class="sig-name descname"><span class="pre">lookup_range</span></span><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{'days':</span> <span class="pre">-7}</span></em><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.lookup_range" title="Permalink to this definition">¶</a></dt>
<dd><p>timedelta to search for previous run</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.fallback">
<span class="sig-name descname"><span class="pre">fallback</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.fallback" title="Permalink to this definition">¶</a></dt>
<dd><p>timedelta to use if no previous run found</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/T3AddLastRunTime.html#T3AddLastRunTime.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.T3AddLastRunTime.T3AddLastRunTime.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add last run time (UNIX epoch) as “last_run”.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.context.T3AddAlertsNumber.</span></span><span class="sig-name descname"><span class="pre">T3AddAlertsNumber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/T3AddAlertsNumber.html#T3AddAlertsNumber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/T3AddAlertsNumber.html#T3AddAlertsNumber.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.T3AddAlertsNumber.T3AddAlertsNumber.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add number of alerts processed since last run of this event as “processed_alerts”</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="base-classes-for-processing-units">
<h2>Base classes for processing units<a class="headerlink" href="#base-classes-for-processing-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AdminUnit.AdminUnit">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.core.AdminUnit.</span></span><span class="sig-name descname"><span class="pre">AdminUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AdminUnit.html#AdminUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AdminUnit.AdminUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>Top level abstract class receiving a reference to
an AmpelContext instance as constructor parameter</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AdminUnit.AdminUnit.context">
<span class="sig-name descname"><span class="pre">context</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><span class="pre">ampel.core.AmpelContext.AmpelContext</span></a></em><a class="headerlink" href="#ampel.core.AdminUnit.AdminUnit.context" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration, database client, etc.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.abstract.AbsProcessorUnit.</span></span><span class="sig-name descname"><span class="pre">AbsProcessorUnit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/abstract/AbsProcessorUnit.html#AbsProcessorUnit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for units that orchestrate an Ampel processing tier.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.process_name">
<span class="sig-name descname"><span class="pre">process_name</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.process_name" title="Permalink to this definition">¶</a></dt>
<dd><p>name of the process that instantiated this processor</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>channels associated with this processor</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.raise_exc">
<span class="sig-name descname"><span class="pre">raise_exc</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.raise_exc" title="Permalink to this definition">¶</a></dt>
<dd><p>raise exceptions instead of catching and logging</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.log_profile">
<span class="sig-name descname"><span class="pre">log_profile</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">'default'</span></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.log_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>logging configuration to use, from the logging section of the Ampel config</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.base_log_flag">
<span class="sig-name descname"><span class="pre">base_log_flag</span></span><em class="property"><span class="pre">:</span> <span class="pre">ampel.log.LogFlag.LogFlag</span></em><em class="property"> <span class="pre">=</span> <span class="pre">16</span></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.base_log_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>flag to apply to all log records created</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.db_handler_kwargs">
<span class="sig-name descname"><span class="pre">db_handler_kwargs</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.db_handler_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>additional kwargs to pass to <code class="xref py py-class docutils literal notranslate"><span class="pre">DBLoggingHandler</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.run">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/abstract/AbsProcessorUnit.html#AbsProcessorUnit.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run processing steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.new_run_id">
<span class="sig-name descname"><span class="pre">new_run_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/abstract/AbsProcessorUnit.html#AbsProcessorUnit.new_run_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit.new_run_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an identifier that can be used to associate log entries from a
single process invocation. This ID is unique and monotonicaly increasing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="processor-units">
<h2>Processor units<a class="headerlink" href="#processor-units" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t2.T2Processor.</span></span><span class="sig-name descname"><span class="pre">T2Processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t2/T2Processor.html#T2Processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit" title="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsProcessorUnit.AbsProcessorUnit</span></code></a></p>
<p>Fill results into pending <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.t2_units">
<span class="sig-name descname"><span class="pre">t2_units</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.t2_units" title="Permalink to this definition">¶</a></dt>
<dd><p>ids of the t2 units to run. If not specified, any t2 unit will be run.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.run_state">
<span class="sig-name descname"><span class="pre">run_state</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.enum.T2SysRunState.T2SysRunState</span><span class="p"><span class="pre">,</span> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.enum.T2SysRunState.T2SysRunState</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">[&lt;T2SysRunState.NEW:</span> <span class="pre">-1&gt;,</span> <span class="pre">&lt;T2SysRunState.NEW_PRIO:</span> <span class="pre">-2&gt;,</span> <span class="pre">&lt;T2SysRunState.PENDING_DEPENDENCY:</span> <span class="pre">-4&gt;,</span> <span class="pre">&lt;T2SysRunState.RERUN_REQUESTED:</span> <span class="pre">-1003&gt;]</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.run_state" title="Permalink to this definition">¶</a></dt>
<dd><p>process only those <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a>
with the given <code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.doc_limit">
<span class="sig-name descname"><span class="pre">doc_limit</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.doc_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>max number of t2 docs to process in <a class="reference internal" href="#ampel.t2.T2Processor.T2Processor.run" title="ampel.t2.T2Processor.T2Processor.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.stock_jtag">
<span class="sig-name descname"><span class="pre">stock_jtag</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.stock_jtag" title="Permalink to this definition">¶</a></dt>
<dd><p>tag(s) to add to the stock <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.JournalRecord.JournalRecord" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">JournalRecord</span></code></a>
every time a <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2Document</span></code></a> is processed</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.send_beacon">
<span class="sig-name descname"><span class="pre">send_beacon</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.send_beacon" title="Permalink to this definition">¶</a></dt>
<dd><p>create a “beacon” document indicating the last time T2Processor was run
in the current configuration</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.garbage_collect">
<span class="sig-name descname"><span class="pre">garbage_collect</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.garbage_collect" title="Permalink to this definition">¶</a></dt>
<dd><p>explicitly call <a class="reference external" href="https://docs.python.org/3/library/gc.html#gc.collect" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.collect()</span></code></a> after every document</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.run_dependent_t2s">
<span class="sig-name descname"><span class="pre">run_dependent_t2s</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.run_dependent_t2s" title="Permalink to this definition">¶</a></dt>
<dd><p>process dependencies of <code class="xref py py-class docutils literal notranslate"><span class="pre">tied</span> <span class="pre">T2</span> <span class="pre">units</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.max_try">
<span class="sig-name descname"><span class="pre">max_try</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.max_try" title="Permalink to this definition">¶</a></dt>
<dd><p>maximum number of processing attempts per document</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.backoff_on_retry">
<span class="sig-name descname"><span class="pre">backoff_on_retry</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.t2.T2Processor.BackoffConfig</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">BackoffConfig(base=2.0,</span> <span class="pre">factor=1.0,</span> <span class="pre">jitter=True)</span></em><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.backoff_on_retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an exponentially increasing delay on PENDING_DEPENDENCY</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pre_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t2/T2Processor.html#T2Processor.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.run" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of t2 docs processed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t2.T2Processor.T2Processor.load_datapoints">
<span class="sig-name descname"><span class="pre">load_datapoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dps_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t2/T2Processor.html#T2Processor.load_datapoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t2.T2Processor.T2Processor.load_datapoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Load datapoints in the order they appear in dps_ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataPoint</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.T3Processor.T3Processor">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.T3Processor.</span></span><span class="sig-name descname"><span class="pre">T3Processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_journal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_journal_tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/T3Processor.html#T3Processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.abstract.AbsProcessorUnit.AbsProcessorUnit" title="ampel.abstract.AbsProcessorUnit.AbsProcessorUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsProcessorUnit.AbsProcessorUnit</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update_journal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Record the invocation of this event in the stock journal</p></li>
<li><p><strong>update_events</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Record this event in the events collection</p></li>
<li><p><strong>extra_journal_tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – tag(s) to add to the <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.JournalRecord.JournalRecord" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">JournalRecord</span></code></a>
of each selected stock</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>by default, <a class="reference internal" href="#ampel.t3.T3Processor.T3Processor.run" title="ampel.t3.T3Processor.T3Processor.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> add entries to the journals of selected
stocks, store log records in the database, and records the invocation in
the events collection. To run an “anonymous” event that does not change
the state of the database:</p>
<ul class="simple">
<li><p>use a log_profile without db logging (profiles are defined under ‘logging’ in the ampel config)</p></li>
<li><p>set update_journal = False (no update to the transient doc)</p></li>
<li><p>set update_events = False (no update to the events collection)</p></li>
<li><p>set raise_exc = True (troubles collection will not be populated if an exception occurs)</p></li>
</ul>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.T3Processor.T3Processor.directives">
<span class="sig-name descname"><span class="pre">directives</span></span><em class="property"><span class="pre">:</span> <span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.t3.T3Directive.T3Directive" title="ampel.model.t3.T3Directive.T3Directive"><span class="pre">ampel.model.t3.T3Directive.T3Directive</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor.directives" title="Permalink to this definition">¶</a></dt>
<dd><p>T3 processing sequences</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.T3Processor.T3Processor.chunk_size">
<span class="sig-name descname"><span class="pre">chunk_size</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">200</span></em><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor.chunk_size" title="Permalink to this definition">¶</a></dt>
<dd><p>number of stocks to load at once</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.T3Processor.T3Processor.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/T3Processor.html#T3Processor.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.T3Processor.T3Processor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run processing steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="t3-machinery">
<h2>T3 machinery<a class="headerlink" href="#t3-machinery" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.t3.T3Directive.</span></span><span class="sig-name descname"><span class="pre">T3Directive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/t3/T3Directive.html#T3Directive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of a Tier 3 processing sequence.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive.context">
<span class="sig-name descname"><span class="pre">context</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.context" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide context for run</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive.select">
<span class="sig-name descname"><span class="pre">select</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select stocks</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive.load">
<span class="sig-name descname"><span class="pre">load</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a> for each selected stock</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive.complement">
<span class="sig-name descname"><span class="pre">complement</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add external information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T3Directive.T3Directive.run">
<span class="sig-name descname"><span class="pre">run</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></em><a class="headerlink" href="#ampel.model.t3.T3Directive.T3Directive.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute unit(s) on each view (unit definition for the underlying AbsT3UnitRunner)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.context.AbsT3RunContextAppender.</span></span><span class="sig-name descname"><span class="pre">AbsT3RunContextAppender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/AbsT3RunContextAppender.html#AbsT3RunContextAppender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.core.AdminUnit.AdminUnit</span></code></a></p>
<p>Add contextual information to a T3 process, such as the time of the previous
run, or the number of alerts processed since that run.</p>
<p>Inherits from AdminUnit because subclasses might need access to
the AmpelConfig (foremost to the contained resource definitions)</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender.update">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/context/AbsT3RunContextAppender.html#AbsT3RunContextAppender.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.context.AbsT3RunContextAppender.AbsT3RunContextAppender.update" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_context</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]) – run context to fill</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.select.AbsT3Selector.AbsT3Selector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.select.AbsT3Selector.</span></span><span class="sig-name descname"><span class="pre">AbsT3Selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/AbsT3Selector.html#AbsT3Selector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.AbsT3Selector.AbsT3Selector" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.select.AbsT3Selector.AbsT3Selector.field_name">
<span class="sig-name descname"><span class="pre">field_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">'_id'</span></em><a class="headerlink" href="#ampel.t3.select.AbsT3Selector.AbsT3Selector.field_name" title="Permalink to this definition">¶</a></dt>
<dd><p>field used to identify stocks</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.select.AbsT3Selector.AbsT3Selector.fetch">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/AbsT3Selector.html#AbsT3Selector.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.AbsT3Selector.AbsT3Selector.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selected stock ids</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.select.T3StockSelector.</span></span><span class="sig-name descname"><span class="pre">T3StockSelector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/T3StockSelector.html#T3StockSelector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>Default stock selector used by T3Processor</p>
<p>Example configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;created&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="s2">&quot;$timeDelta&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">40</span><span class="p">}}},</span>
   <span class="s2">&quot;modified&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="s2">&quot;$timeDelta&quot;</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}}},</span>
   <span class="s2">&quot;channel&quot;</span><span class="p">:</span> <span class="s2">&quot;HU_GP_CLEAN&quot;</span><span class="p">,</span>
   <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;with&quot;</span><span class="p">:</span> <span class="s2">&quot;ZTF&quot;</span><span class="p">,</span> <span class="s2">&quot;without&quot;</span><span class="p">:</span> <span class="s2">&quot;HAS_ERROR&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector.created">
<span class="sig-name descname"><span class="pre">created</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="ampel.model.time.TimeConstraintModel.TimeConstraintModel"><span class="pre">ampel.model.time.TimeConstraintModel.TimeConstraintModel</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.created" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by creation time</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector.modified">
<span class="sig-name descname"><span class="pre">modified</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="ampel.model.time.TimeConstraintModel.TimeConstraintModel"><span class="pre">ampel.model.time.TimeConstraintModel.TimeConstraintModel</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by modification time</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf"><span class="pre">ampel.model.operator.AnyOf.AnyOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><span class="pre">ampel.model.operator.AllOf.AllOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.OneOf.OneOf" title="ampel.model.operator.OneOf.OneOf"><span class="pre">ampel.model.operator.OneOf.OneOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by channel</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector.tag">
<span class="sig-name descname"><span class="pre">tag</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[Dict[Literal[with,</span> <span class="pre">without],</span> <span class="pre">Union[int,</span> <span class="pre">str,</span> <span class="pre">Dict,</span> <span class="pre">ampel.model.operator.AllOf.AllOf[typing.Union[int,</span> <span class="pre">str]],</span> <span class="pre">ampel.model.operator.AnyOf.AnyOf[typing.Union[int,</span> <span class="pre">str]],</span> <span class="pre">ampel.model.operator.OneOf.OneOf[typing.Union[int,</span> <span class="pre">str]]]]]</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Select by tag</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.select.T3StockSelector.T3StockSelector.fetch">
<span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/T3StockSelector.html#T3StockSelector.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.T3StockSelector.T3StockSelector.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selected stock ids</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://pymongo.readthedocs.io/en/stable/api/pymongo/cursor.html#pymongo.cursor.Cursor" title="(in PyMongo v4.1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.select.T3FilteringStockSelector.</span></span><span class="sig-name descname"><span class="pre">T3FilteringStockSelector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/T3FilteringStockSelector.html#T3FilteringStockSelector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>Selector subclass that filters stocks based on their latest T2 results.</p>
<p>Example configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="o">...</span>
        <span class="s2">&quot;t2_filter&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                        <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;T2SNCosmo&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s2">&quot;fit_acceptable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                                <span class="s2">&quot;fit_results.c&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;$gt&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
                        <span class="p">},</span>
                <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector.fetch">
<span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/select/T3FilteringStockSelector.html#T3FilteringStockSelector.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.select.T3FilteringStockSelector.T3FilteringStockSelector.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get selected stock ids</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.load.AbsT3Loader.AbsT3Loader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.load.AbsT3Loader.</span></span><span class="sig-name descname"><span class="pre">AbsT3Loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/AbsT3Loader.html#AbsT3Loader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.AbsT3Loader.AbsT3Loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for loading documents associated with a set of stocks.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.load.AbsT3Loader.AbsT3Loader.directives">
<span class="sig-name descname"><span class="pre">directives</span></span><em class="property"><span class="pre">:</span> <span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="ampel.model.t3.LoaderDirective.LoaderDirective"><span class="pre">ampel.model.t3.LoaderDirective.LoaderDirective</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.load.AbsT3Loader.AbsT3Loader.directives" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of documents to load. If these are supplied as strings,
they will be resolved by retrieving the corresponding alias from the
Ampel config.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.load.AbsT3Loader.AbsT3Loader.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf"><span class="pre">ampel.model.operator.AnyOf.AnyOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><span class="pre">ampel.model.operator.AllOf.AllOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.OneOf.OneOf" title="ampel.model.operator.OneOf.OneOf"><span class="pre">ampel.model.operator.OneOf.OneOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.load.AbsT3Loader.AbsT3Loader.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channels to load documents for</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.load.AbsT3Loader.AbsT3Loader.load">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/AbsT3Loader.html#AbsT3Loader.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.AbsT3Loader.AbsT3Loader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load documents for the selected stocks</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.load.T3SimpleDataLoader.</span></span><span class="sig-name descname"><span class="pre">T3SimpleDataLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/T3SimpleDataLoader.html#T3SimpleDataLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all requested documents for the selected stocks</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/T3SimpleDataLoader.html#T3SimpleDataLoader.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load documents for the selected stocks</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.load.T3LatestStateDataLoader.</span></span><span class="sig-name descname"><span class="pre">T3LatestStateDataLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/T3LatestStateDataLoader.html#T3LatestStateDataLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Load only T1 and T2 documents associated with the latest state of each
stock in the selected channels. The latest state is the compound doc with
the largest value of <code class="docutils literal notranslate"><span class="pre">len</span></code> or <code class="docutils literal notranslate"><span class="pre">added</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>T3LatestStateDataLoader can only load state-bound T2 documents. If you
need point- or stock-bound T2s, use
<a class="reference internal" href="#ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader" title="ampel.t3.load.T3SimpleDataLoader.T3SimpleDataLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">T3SimpleDataLoader</span></code></a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">ampel.db.query.latest_compound.fast_query()</span></code></dt><dd><p>for notes on how compounds are selected from T0</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">ampel.db.query.latest_compound.general_query()</span></code></dt><dd><p>for notes on how compounds are selected from other tiers</p>
</dd>
</dl>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/load/T3LatestStateDataLoader.html#T3LatestStateDataLoader.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.load.T3LatestStateDataLoader.T3LatestStateDataLoader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Warning: if stock_ids is an Iterator, it will be fully consumed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.complement.AbsT3DataAppender.</span></span><span class="sig-name descname"><span class="pre">AbsT3DataAppender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/complement/AbsT3DataAppender.html#AbsT3DataAppender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Complement <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a> with information
stored outside the Ampel database.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender.complement">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">complement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/complement/AbsT3DataAppender.html#AbsT3DataAppender.complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.complement.AbsT3DataAppender.AbsT3DataAppender.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.complement.T3ExtJournalAppender.</span></span><span class="sig-name descname"><span class="pre">T3ExtJournalAppender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/complement/T3ExtJournalAppender.html#T3ExtJournalAppender"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender" title="Permalink to this definition">¶</a></dt>
<dd><p>Import journal entries from a ‘foreign’ database, e.g. one created
by a previous version of Ampel.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender.complement">
<span class="sig-name descname"><span class="pre">complement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">it</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/complement/T3ExtJournalAppender.html#T3ExtJournalAppender.complement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.complement.T3ExtJournalAppender.T3ExtJournalAppender.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to each <a class="reference internal" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="ampel.core.AmpelBuffer.AmpelBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBuffer</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.AbsT3UnitRunner.</span></span><span class="sig-name descname"><span class="pre">AbsT3UnitRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/AbsT3UnitRunner.html#AbsT3UnitRunner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Supply stock views to one or more T3 units.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.raise_exc">
<span class="sig-name descname"><span class="pre">raise_exc</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.raise_exc" title="Permalink to this definition">¶</a></dt>
<dd><p>raise exceptions instead of catching and logging</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.update_journal">
<span class="sig-name descname"><span class="pre">update_journal</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.update_journal" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the invocation of this event in the journal of each selected stock</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.extra_journal_tag">
<span class="sig-name descname"><span class="pre">extra_journal_tag</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.extra_journal_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>tag to add to journal records</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.run_context">
<span class="sig-name descname"><span class="pre">run_context</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.run_context" title="Permalink to this definition">¶</a></dt>
<dd><p>contextual information for this run</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.run">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/AbsT3UnitRunner.html#AbsT3UnitRunner.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a chunk of stocks</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.done">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/AbsT3UnitRunner.html#AbsT3UnitRunner.done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal that the run has finished</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.T3UnitRunner.</span></span><span class="sig-name descname"><span class="pre">T3UnitRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3UnitRunner.html#T3UnitRunner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner</span></code></a></p>
<p>Default implementation handling the instructions defined
by <a class="reference internal" href="#ampel.model.t3.T3Directive.T3Directive" title="ampel.model.t3.T3Directive.T3Directive"><code class="xref py py-class docutils literal notranslate"><span class="pre">T3Directive.run</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">RunDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3UnitRunner.html#T3UnitRunner.RunDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
<p>Internal model used for field ‘directives’ of T3UnitRunner</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>unit to use for down-selection of stocks</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.project">
<span class="sig-name descname"><span class="pre">project</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.project" title="Permalink to this definition">¶</a></dt>
<dd><p>unit to use for projection of each stock</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><em class="property"><span class="pre">:</span> <span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>units to use to execute T3s</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.cast_to_sequence_if_need_be">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">cast_to_sequence_if_need_be</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3UnitRunner.html#T3UnitRunner.RunDirective.cast_to_sequence_if_need_be"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective.cast_to_sequence_if_need_be" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.directives">
<span class="sig-name descname"><span class="pre">directives</span></span><em class="property"><span class="pre">:</span> <span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective" title="ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective"><span class="pre">ampel.t3.run.T3UnitRunner.T3UnitRunner.RunDirective</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.directives" title="Permalink to this definition">¶</a></dt>
<dd><p>Processing specification</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3UnitRunner.html#T3UnitRunner.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a chunk of stocks</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.T3UnitRunner.T3UnitRunner.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3UnitRunner.html#T3UnitRunner.done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal that the run has finished</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.T3DynamicUnitRunner.</span></span><span class="sig-name descname"><span class="pre">T3DynamicUnitRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3DynamicUnitRunner.html#T3DynamicUnitRunner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner" title="ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.AbsT3UnitRunner.AbsT3UnitRunner</span></code></a></p>
<p>Unit runner that for each channel found in the elements loaded by the stages:</p>
<ul class="simple">
<li><p>spawns a dedicated <a class="reference internal" href="#ampel.t3.run.T3UnitRunner.T3UnitRunner" title="ampel.t3.run.T3UnitRunner.T3UnitRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">T3UnitRunner</span></code></a> instance configured to filter and project elements wrt this channel</p></li>
<li><p>execute the associated T3 units</p></li>
</ul>
<p>Example:
A general T3 process performs a broad, channel-less query.
Many stocks are returned, each possibly associated with different channels.
This unit builds a set of all channels referenced by the results.
Then, for each channel, the information about the referenced elements are posted into
a dedicated Slack channel whose name corresponds to the Ampel channel. Suppose,
for example, that the results contain objects:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">1</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{A}&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">2</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{A,</span> <span class="pre">B}&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;object</span> <span class="pre">3</span> <span class="pre">with</span> <span class="pre">channel</span> <span class="pre">{B,</span> <span class="pre">C,</span> <span class="pre">D}&gt;</span></code></p></li>
</ul>
<p>This will cause:</p>
<ul class="simple">
<li><p>Object 1 and 2 to be posted to slack channel #A</p></li>
<li><p>Object 2 and 3  to be posted to slack channel #B</p></li>
<li><p>Object 3 to be posted to slack channel #C</p></li>
<li><p>Object 3 to be posted to slack channel #D</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3DynamicUnitRunner.html#T3DynamicUnitRunner.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a chunk of stocks</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/T3DynamicUnitRunner.html#T3DynamicUnitRunner.done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.T3DynamicUnitRunner.T3DynamicUnitRunner.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal that the run has finished</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.filter.AbsT3Filter.AbsT3Filter">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.filter.AbsT3Filter.</span></span><span class="sig-name descname"><span class="pre">AbsT3Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/filter/AbsT3Filter.html#AbsT3Filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.filter.AbsT3Filter.AbsT3Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelABC.AmpelABC</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.filter.T3AmpelBufferFilter.</span></span><span class="sig-name descname"><span class="pre">T3AmpelBufferFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/filter/T3AmpelBufferFilter.html#T3AmpelBufferFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.filter.AbsT3Filter.AbsT3Filter" title="ampel.t3.run.filter.AbsT3Filter.AbsT3Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.filter.AbsT3Filter.AbsT3Filter</span></code></a></p>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter.FilterModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">FilterModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/filter/T3AmpelBufferFilter.html#T3AmpelBufferFilter.FilterModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.filter.T3AmpelBufferFilter.T3AmpelBufferFilter.FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.AbsT3Projector.AbsT3Projector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.project.AbsT3Projector.</span></span><span class="sig-name descname"><span class="pre">AbsT3Projector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/AbsT3Projector.html#AbsT3Projector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.AbsT3Projector.AbsT3Projector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelABC.AmpelABC</span></code>, <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.project.T3BaseProjector.</span></span><span class="sig-name descname"><span class="pre">T3BaseProjector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3BaseProjector.html#T3BaseProjector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.project.AbsT3Projector.AbsT3Projector" title="ampel.t3.run.project.AbsT3Projector.AbsT3Projector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.project.AbsT3Projector.AbsT3Projector</span></code></a></p>
<p>Creates SnapView(s) based on AmpelBuffer(s)</p>
<p>AmpelBuffer attributes are selected according to ‘filters’ content:</p>
<ul class="simple">
<li><p>missing fields will not be included
(for example, if ‘names’ is absent in filters dict,
the field ‘names’ of all snapviews will be None)</p></li>
<li><p>a “pass-through” behavior occurs when a dict value are None.
(for example, if ‘names’ is set to None, snapviews instances
will contain the all the names of the corresponding AmpelBuffer)</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.ClassModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ClassModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3BaseProjector.html#T3BaseProjector.ClassModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.ClassModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FuncModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">FuncModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3BaseProjector.html#T3BaseProjector.FuncModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FuncModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FilterOutModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">FilterOutModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3BaseProjector.html#T3BaseProjector.FilterOutModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.FilterOutModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3BaseProjector.T3BaseProjector.add_func_projector">
<span class="sig-name descname"><span class="pre">add_func_projector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3BaseProjector.html#T3BaseProjector.add_func_projector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector.add_func_projector" title="Permalink to this definition">¶</a></dt>
<dd><p>A matcher rejects/accepts dict instances from a list referenced by the given key.
For example, a ampel_buffer intance can contain many t2 documents (ampel_buffer dict key “t2”).
The matchers will determine which dict from the list should be kept
(a typical case would be to exclude dicts based on channel associations)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>first</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether field matchers should be put first in the list of matchers for the provided key</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p>ValueError if requested field projector unit / configs are invalid</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.t3.run.project.T3ChannelProjector.</span></span><span class="sig-name descname"><span class="pre">T3ChannelProjector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3ChannelProjector.html#T3ChannelProjector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampel.t3.run.project.T3BaseProjector.T3BaseProjector" title="ampel.t3.run.project.T3BaseProjector.T3BaseProjector"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.t3.run.project.T3BaseProjector.T3BaseProjector</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector.channel_projection">
<span class="sig-name descname"><span class="pre">channel_projection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dicts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/t3/run/project/T3ChannelProjector.html#T3ChannelProjector.channel_projection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.t3.run.project.T3ChannelProjector.T3ChannelProjector.channel_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out dict entries not associated with configured channel
Note: debug ouput handled by super class</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="context-and-configuration">
<h2>Context and configuration<a class="headerlink" href="#context-and-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.core.AmpelContext.</span></span><span class="sig-name descname"><span class="pre">AmpelContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loader</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is typically instantiated by Ampel controllers
and provided to “processor unit” instances.
Note: this class might in the future be capable
of handling multiple AmpelConfig/AmpelDB instances</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.config.AmpelConfig.AmpelConfig" title="(in ampel-interface v0.8)"><span class="pre">ampel.config.AmpelConfig.AmpelConfig</span></a></em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.config" title="Permalink to this definition">¶</a></dt>
<dd><p>System configuration</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.db">
<span class="sig-name descname"><span class="pre">db</span></span><em class="property"><span class="pre">:</span> <span class="pre">AmpelDB</span></em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Database client</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.loader">
<span class="sig-name descname"><span class="pre">loader</span></span><em class="property"><span class="pre">:</span> <span class="pre">UnitLoader</span></em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a unit from a <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnitModel</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.tier">
<span class="sig-name descname"><span class="pre">tier</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">0</span><span class="p"><span class="pre">,</span> </span><span class="pre">1</span><span class="p"><span class="pre">,</span> </span><span class="pre">2</span><span class="p"><span class="pre">,</span> </span><span class="pre">3</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.tier" title="Permalink to this definition">¶</a></dt>
<dd><p>Context is valid for this processing tier only (if None, valid for all).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.load">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd_file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – either a local path to an ampel config file (yaml or json)
or directly an AmpelConfig instance.</p></li>
<li><p><strong>pwd_file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – if provided, the encrypted conf entries possibly contained in the
ampel config instance will be decrypted using the provided password file.
The password file must define one password per line.</p></li>
<li><p><strong>freeze_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether to convert the elements contained of ampel config
into immutable structures (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> -&gt;
<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.view.ReadOnlyDict.ReadOnlyDict" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadOnlyDict</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> -&gt; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>).
Parameter does only apply if the config is loaded by this method, i.e if parameter ‘config’ is a str.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.build">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwd_file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pwds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a new AmpelContext instance.</p>
<p>The required underlying ampel configuration (<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.config.AmpelConfig.AmpelConfig" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a>) is built from scratch,
meaning all available configurations defined in the various ampel repositories available locally
are collected, merged merged together and morphed the info into the final ampel config.
This is a convenience method, do not use for production</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelContext</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.get_config">
<span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.get_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_config" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, AmpelContext might hold references to multiple different config</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.config.AmpelConfig.AmpelConfig" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelConfig</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.get_database">
<span class="sig-name descname"><span class="pre">get_database</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.get_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.get_database" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>in the future, this class might hold references to multiple different databases</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>AmpelDB</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.deactivate_processes">
<span class="sig-name descname"><span class="pre">deactivate_processes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.deactivate_processes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.deactivate_processes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelContext.AmpelContext.activate_process">
<span class="sig-name descname"><span class="pre">activate_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelContext.html#AmpelContext.activate_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelContext.AmpelContext.activate_process" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>False if process was deactivated, True if not found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.core.UnitLoader.</span></span><span class="sig-name descname"><span class="pre">UnitLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">secrets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.resolve_aliases">
<span class="sig-name descname"><span class="pre">resolve_aliases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.resolve_aliases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively resolve aliases from config</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.resolve_secrets">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">resolve_secrets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">secrets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.resolve_secrets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.resolve_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively walk annotations, resolving any Secret fields that are found</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_init_config">
<span class="sig-name descname"><span class="pre">get_init_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve_secrets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_init_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_init_config" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError is model type is not recognized</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.validate_unit_models">
<span class="sig-name descname"><span class="pre">validate_unit_models</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.validate_unit_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.validate_unit_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable validation for UnitModel instances</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_resources">
<span class="sig-name descname"><span class="pre">get_resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Resources are defined using the static variable ‘require’ in ampel units
-&gt; example: catsHTM.default</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.get_class_by_name">
<span class="sig-name descname"><span class="pre">get_class_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.core.UnitLoader.T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.core.UnitLoader.T</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.get_class_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.get_class_by_name" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_class_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></a><span class="p"><span class="pre">]</span></span></dt>
<dd><p>Matches the parameter ‘name’ with the unit definitions defined in the ampel_config.
This allows to retrieve the corresponding fully qualified name of the class and to load it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[~T]]) – <ul class="simple">
<li><p>DataUnit or any sublcass of DataUnit</p></li>
<li><p>AdminUnit or any sublcass of AdminUnit</p></li>
<li><p>If None, FQN will be retrieved from the auxiliary class conf entries and returned object will have Type[Any]</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>ValueError if unit cannot be found or loaded or if parent class is unrecognized</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[~T], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new">
<span class="sig-name descname"><span class="pre">new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.core.UnitLoader.T</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">ampel.core.UnitLoader.T</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">new</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.base.AmpelBaseModel.AmpelBaseModel</span></a></dt>
<dd><p>Instantiate new object based on provided model and kwargs.
:param ‘unit_type’: performs isinstance check and raise error on mismatch. Enables mypy/other static checks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~T, <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.base.AmpelBaseModel.AmpelBaseModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelBaseModel</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new_base_unit">
<span class="sig-name descname"><span class="pre">new_base_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger"><span class="pre">ampel.log.AmpelLogger.AmpelLogger</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.core.UnitLoader.BT</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">ampel.core.UnitLoader.BT</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new_base_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_base_unit" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">new_base_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger"><span class="pre">ampel.log.AmpelLogger.AmpelLogger</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">ampel.base.DataUnit.DataUnit</span></dt>
<dd><p>Base units require logger and resource as init parameters, additionaly to the potentialy
defined custom parameters which will be provided as a union of the model config
and the kwargs provided to this method (the latter having prevalance)
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[~BT, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataUnit</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.UnitLoader.UnitLoader.new_admin_unit">
<span class="sig-name descname"><span class="pre">new_admin_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><span class="pre">ampel.core.AmpelContext.AmpelContext</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.core.UnitLoader.PT</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">ampel.core.UnitLoader.PT</span><a class="reference internal" href="_modules/ampel/core/UnitLoader.html#UnitLoader.new_admin_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.UnitLoader.UnitLoader.new_admin_unit" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">new_admin_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#ampel.core.AmpelContext.AmpelContext" title="ampel.core.AmpelContext.AmpelContext"><span class="pre">ampel.core.AmpelContext.AmpelContext</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit"><span class="pre">ampel.core.AdminUnit.AdminUnit</span></a></dt>
<dd><p>Processor units require a context as init parameters, additionaly to the potentialy
defined custom parameters which will be provided as a union of the model config
and the kwargs provided to this method (the latter having prevalance)
:raises: ValueError is the unit defined in the model is unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference internal" href="#ampel.core.AdminUnit.AdminUnit" title="ampel.core.AdminUnit.AdminUnit"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminUnit</span></code></a>, ~PT]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.dev.DictSecretProvider.DictSecretProvider">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.dev.DictSecretProvider.</span></span><span class="sig-name descname"><span class="pre">DictSecretProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/dev/DictSecretProvider.html#DictSecretProvider"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="ampel.dev.DictSecretProvider.DictSecretProvider.load">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/dev/DictSecretProvider.html#DictSecretProvider.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load from a YAML file. If the file was encrypted with <a class="reference external" href="https://github.com/mozilla/sops">sops</a>, it will
be decrypted with <code class="docutils literal notranslate"><span class="pre">sops</span> <span class="pre">-d</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.dev.DictSecretProvider.DictSecretProvider" title="ampel.dev.DictSecretProvider.DictSecretProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictSecretProvider</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.dev.DictSecretProvider.DictSecretProvider.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/dev/DictSecretProvider.html#DictSecretProvider.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.dev.DictSecretProvider.DictSecretProvider.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a secret by key. May raise an exception if the key is not known.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SecretWrapper</span></code>[~T]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-classes">
<h2>Data classes<a class="headerlink" href="#data-classes" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.core.AmpelBuffer.</span></span><span class="sig-name descname"><span class="pre">AmpelBuffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelBuffer.html#AmpelBuffer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Content bundle used to build <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.view.SnapView.SnapView" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SnapView</span></code></a>.</p>
<p>This is a dict containing 1 or more of the following items:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.id">
<span class="sig-name descname"><span class="pre">id</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.stock">
<span class="sig-name descname"><span class="pre">stock</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.StockDocument.StockDocument" title="(in ampel-interface v0.8)"><span class="pre">ampel.content.StockDocument.StockDocument</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.stock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.t0">
<span class="sig-name descname"><span class="pre">t0</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.content.DataPoint.DataPoint</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.t1">
<span class="sig-name descname"><span class="pre">t1</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.content.Compound.Compound</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.t2">
<span class="sig-name descname"><span class="pre">t2</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><span class="pre">ampel.content.T2Document.T2Document</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.t2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.log">
<span class="sig-name descname"><span class="pre">log</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.LogDocument.LogDocument" title="(in ampel-interface v0.8)"><span class="pre">ampel.content.LogDocument.LogDocument</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelBuffer.AmpelBuffer.extra">
<span class="sig-name descname"><span class="pre">extra</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelBuffer.AmpelBuffer.extra" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.AnyOf.AnyOf">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.AnyOf.</span></span><span class="sig-name descname"><span class="pre">AnyOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/AnyOf.html#AnyOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.operator.AnyOf.AnyOf.any_of">
<span class="sig-name descname"><span class="pre">any_of</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.type.T</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><span class="pre">ampel.model.operator.AllOf.AllOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">T</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.operator.AnyOf.AnyOf.any_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical OR</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.AllOf.AllOf">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.AllOf.</span></span><span class="sig-name descname"><span class="pre">AllOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/AllOf.html#AllOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.operator.AllOf.AllOf.all_of">
<span class="sig-name descname"><span class="pre">all_of</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.type.T</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.operator.AllOf.AllOf.all_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical AND</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.operator.OneOf.OneOf">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.operator.OneOf.</span></span><span class="sig-name descname"><span class="pre">OneOf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/operator/OneOf.html#OneOf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.operator.OneOf.OneOf" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.operator.OneOf.OneOf.one_of">
<span class="sig-name descname"><span class="pre">one_of</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.type.T</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.operator.OneOf.OneOf.one_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Select items by logical XOR</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This can’t be modelled in Mongo, as it has no logical XOR operation</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeConstraintModel.</span></span><span class="sig-name descname"><span class="pre">TimeConstraintModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeConstraintModel.html#TimeConstraintModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_delta&quot;</span><span class="p">,</span>
            <span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeStr&quot;</span><span class="p">:</span> <span class="s2">&quot;21/11/06 16:30&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dateTimeFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%y %H:%M&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TimeConstraintModel</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span>
        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;time_last_run&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;val_test&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;match_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unix_time&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">1531306299</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.before">
<span class="sig-name descname"><span class="pre">before</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel"><span class="pre">ampel.model.time.TimeDeltaModel.TimeDeltaModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel"><span class="pre">ampel.model.time.TimeLastRunModel.TimeLastRunModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel"><span class="pre">ampel.model.time.TimeStringModel.TimeStringModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel"><span class="pre">ampel.model.time.UnixTimeModel.UnixTimeModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.before" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.after">
<span class="sig-name descname"><span class="pre">after</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="ampel.model.time.TimeDeltaModel.TimeDeltaModel"><span class="pre">ampel.model.time.TimeDeltaModel.TimeDeltaModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="ampel.model.time.TimeLastRunModel.TimeLastRunModel"><span class="pre">ampel.model.time.TimeLastRunModel.TimeLastRunModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="ampel.model.time.TimeStringModel.TimeStringModel"><span class="pre">ampel.model.time.TimeStringModel.TimeStringModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="ampel.model.time.UnixTimeModel.UnixTimeModel"><span class="pre">ampel.model.time.UnixTimeModel.UnixTimeModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.after" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model">
<span class="sig-name descname"><span class="pre">get_query_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeConstraintModel.html#TimeConstraintModel.get_query_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeConstraintModel.TimeConstraintModel.get_query_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this method with db=&lt;instance of AmpelDB&gt;
if your time constraint is based on TimeLastRunModel</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">QueryTimeModel</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeDeltaModel.</span></span><span class="sig-name descname"><span class="pre">TimeDeltaModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeDeltaModel.html#TimeDeltaModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">time_delta</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.days">
<span class="sig-name descname"><span class="pre">days</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.days" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds">
<span class="sig-name descname"><span class="pre">seconds</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.seconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds">
<span class="sig-name descname"><span class="pre">microseconds</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.microseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds">
<span class="sig-name descname"><span class="pre">milliseconds</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.milliseconds" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes">
<span class="sig-name descname"><span class="pre">minutes</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.minutes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours">
<span class="sig-name descname"><span class="pre">hours</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.hours" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks">
<span class="sig-name descname"><span class="pre">weeks</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.weeks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeDeltaModel.html#TimeDeltaModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeDeltaModel.TimeDeltaModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeLastRunModel.</span></span><span class="sig-name descname"><span class="pre">TimeLastRunModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeLastRunModel.html#TimeLastRunModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">time_last_run</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name">
<span class="sig-name descname"><span class="pre">process_name</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.process_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback">
<span class="sig-name descname"><span class="pre">fallback</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.fallback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success">
<span class="sig-name descname"><span class="pre">require_success</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.require_success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeLastRunModel.html#TimeLastRunModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeLastRunModel.TimeLastRunModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.TimeStringModel.</span></span><span class="sig-name descname"><span class="pre">TimeStringModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeStringModel.html#TimeStringModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">time_string</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr">
<span class="sig-name descname"><span class="pre">dateTimeStr</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeStr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat">
<span class="sig-name descname"><span class="pre">dateTimeFormat</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.dateTimeFormat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/TimeStringModel.html#TimeStringModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.TimeStringModel.TimeStringModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.time.UnixTimeModel.</span></span><span class="sig-name descname"><span class="pre">UnixTimeModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/UnixTimeModel.html#UnixTimeModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.match_type">
<span class="sig-name descname"><span class="pre">match_type</span></span><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">unix_time</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.match_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.value">
<span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp">
<span class="sig-name descname"><span class="pre">get_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/time/UnixTimeModel.html#UnixTimeModel.get_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.time.UnixTimeModel.UnixTimeModel.get_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.t3.LoaderDirective.</span></span><span class="sig-name descname"><span class="pre">LoaderDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/t3/LoaderDirective.html#LoaderDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of documents to load</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.col">
<span class="sig-name descname"><span class="pre">col</span></span><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">stock</span><span class="p"><span class="pre">,</span> </span><span class="pre">t0</span><span class="p"><span class="pre">,</span> </span><span class="pre">t1</span><span class="p"><span class="pre">,</span> </span><span class="pre">t2</span><span class="p"><span class="pre">,</span> </span><span class="pre">log</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.col" title="Permalink to this definition">¶</a></dt>
<dd><p>Source collection</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.LoaderDirective.LoaderDirective.query_complement">
<span class="sig-name descname"><span class="pre">query_complement</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.LoaderDirective.LoaderDirective.query_complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to include in the query</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.t3.T2FilterModel.</span></span><span class="sig-name descname"><span class="pre">T2FilterModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/t3/T2FilterModel.html#T2FilterModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>name of T2 unit</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.t3.T2FilterModel.T2FilterModel.match">
<span class="sig-name descname"><span class="pre">match</span></span><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.t3.T2FilterModel.T2FilterModel.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Mongo match expression to apply to most recent result</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.IngestionDirective.</span></span><span class="sig-name descname"><span class="pre">IngestionDirective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/IngestionDirective.html#IngestionDirective"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel for which to create documents</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective.t0_add">
<span class="sig-name descname"><span class="pre">t0_add</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T0AddModel.T0AddModel" title="ampel.model.ingest.T0AddModel.T0AddModel"><span class="pre">ampel.model.ingest.T0AddModel.T0AddModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective.t0_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective.t1_combine">
<span class="sig-name descname"><span class="pre">t1_combine</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T1CombineModel.T1CombineModel" title="ampel.model.ingest.T1CombineModel.T1CombineModel"><span class="pre">ampel.model.ingest.T1CombineModel.T1CombineModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective.t1_combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create <code class="xref py py-class docutils literal notranslate"><span class="pre">compounds</span></code> from
ingested <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code> and the
<a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.StockDocument.StockDocument" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">stock</span></code></a>, e.g. drawing
from other data streams</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective.t2_compute">
<span class="sig-name descname"><span class="pre">t2_compute</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel" title="ampel.model.ingest.T2ComputeModel.T2ComputeModel"><span class="pre">ampel.model.ingest.T2ComputeModel.T2ComputeModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective.t2_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a> bound to <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.StockDocument.StockDocument" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">stocks</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.IngestionDirective.IngestionDirective.stock_update">
<span class="sig-name descname"><span class="pre">stock_update</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.IngestionDirective.IngestionDirective.stock_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.StockDocument.StockDocument" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">stock</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.T0AddModel.T0AddModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.T0AddModel.</span></span><span class="sig-name descname"><span class="pre">T0AddModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/T0AddModel.html#T0AddModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.T0AddModel.T0AddModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.UnitModel.UnitModel</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T0AddModel.T0AddModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.abstract.ingest.AbsIngester.AbsIngester</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T0AddModel.T0AddModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code> to the database</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T0AddModel.T0AddModel.t1_combine">
<span class="sig-name descname"><span class="pre">t1_combine</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T1CombineModel.T1CombineModel" title="ampel.model.ingest.T1CombineModel.T1CombineModel"><span class="pre">ampel.model.ingest.T1CombineModel.T1CombineModel</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T0AddModel.T0AddModel.t1_combine" title="Permalink to this definition">¶</a></dt>
<dd><p>Create <code class="xref py py-class docutils literal notranslate"><span class="pre">compounds</span></code> from ingested <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T0AddModel.T0AddModel.t2_compute">
<span class="sig-name descname"><span class="pre">t2_compute</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel" title="ampel.model.ingest.T2ComputeModel.T2ComputeModel"><span class="pre">ampel.model.ingest.T2ComputeModel.T2ComputeModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T0AddModel.T0AddModel.t2_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a> bound to <code class="xref py py-class docutils literal notranslate"><span class="pre">datapoints</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.T1CombineModel.T1CombineModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.T1CombineModel.</span></span><span class="sig-name descname"><span class="pre">T1CombineModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/T1CombineModel.html#T1CombineModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.T1CombineModel.T1CombineModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.UnitModel.UnitModel</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T1CombineModel.T1CombineModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.abstract.ingest.AbsCompoundIngester.AbsCompoundIngester</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T1CombineModel.T1CombineModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <code class="xref py py-class docutils literal notranslate"><span class="pre">compounds</span></code> to the database</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T1CombineModel.T1CombineModel.t2_compute">
<span class="sig-name descname"><span class="pre">t2_compute</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel" title="ampel.model.ingest.T2ComputeModel.T2ComputeModel"><span class="pre">ampel.model.ingest.T2ComputeModel.T2ComputeModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T1CombineModel.T1CombineModel.t2_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Create or update <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a> bound to <code class="xref py py-class docutils literal notranslate"><span class="pre">compounds</span></code></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.T2ComputeModel.T2ComputeModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.T2ComputeModel.</span></span><span class="sig-name descname"><span class="pre">T2ComputeModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/T2ComputeModel.html#T2ComputeModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.UnitModel.UnitModel</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2ComputeModel.T2ComputeModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">ampel.abstract.ingest.AbsT2Ingester.AbsT2Ingester</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a> to the database</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2ComputeModel.T2ComputeModel.units">
<span class="sig-name descname"><span class="pre">units</span></span><em class="property"><span class="pre">:</span> <span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.ingest.T2IngestModel.T2IngestModel" title="ampel.model.ingest.T2IngestModel.T2IngestModel"><span class="pre">ampel.model.ingest.T2IngestModel.T2IngestModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2ComputeModel.T2ComputeModel.units" title="Permalink to this definition">¶</a></dt>
<dd><p>Specification of <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.content.T2Document.T2Document" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">T2</span> <span class="pre">documents</span></code></a> to create</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.ingest.T2IngestModel.T2IngestModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.ingest.T2IngestModel.</span></span><span class="sig-name descname"><span class="pre">T2IngestModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/ingest/T2IngestModel.html#T2IngestModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.ingest.T2IngestModel.T2IngestModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.StrictModel.StrictModel</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2IngestModel.T2IngestModel.unit">
<span class="sig-name descname"><span class="pre">unit</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.abstract.AbsStockT2Unit.AbsStockT2Unit" title="(in ampel-interface v0.8)"><span class="pre">ampel.abstract.AbsStockT2Unit.AbsStockT2Unit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.abstract.AbsPointT2Unit.AbsPointT2Unit" title="(in ampel-interface v0.8)"><span class="pre">ampel.abstract.AbsPointT2Unit.AbsPointT2Unit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.abstract.AbsStateT2Unit.AbsStateT2Unit" title="(in ampel-interface v0.8)"><span class="pre">ampel.abstract.AbsStateT2Unit.AbsStateT2Unit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.abstract.AbsCustomStateT2Unit.AbsCustomStateT2Unit" title="(in ampel-interface v0.8)"><span class="pre">ampel.abstract.AbsCustomStateT2Unit.AbsCustomStateT2Unit</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2IngestModel.T2IngestModel.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>T2 unit to run</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2IngestModel.T2IngestModel.config">
<span class="sig-name descname"><span class="pre">config</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2IngestModel.T2IngestModel.config" title="Permalink to this definition">¶</a></dt>
<dd><p>T2 unit configuration (hashed)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2IngestModel.T2IngestModel.ingest">
<span class="sig-name descname"><span class="pre">ingest</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2IngestModel.T2IngestModel.ingest" title="Permalink to this definition">¶</a></dt>
<dd><p>Ingester options</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.ingest.T2IngestModel.T2IngestModel.group">
<span class="sig-name descname"><span class="pre">group</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.ingest.T2IngestModel.T2IngestModel.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter result codes that should trigger this T2. If not specified, T2
documents will be created in response to <em>any</em> passing alert.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.template.AbsLegacyChannelTemplate.</span></span><span class="sig-name descname"><span class="pre">AbsLegacyChannelTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/AbsLegacyChannelTemplate.html#AbsLegacyChannelTemplate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsChannelTemplate.AbsChannelTemplate</span></code></p>
<p>Abstract class whose purpose is to maintain compatibility with channel
definitions created for ampel versions &lt; 0.7.
This class must be subclassed.</p>
<p>Known subclass: <code class="xref py py-class docutils literal notranslate"><span class="pre">ZTFLegacyChannelTemplate</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.auto_complete">
<span class="sig-name descname"><span class="pre">auto_complete</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.auto_complete" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>false: apply filter to all photopoints</p></li>
<li><p>true or “live”: bypass filter once a transient has been accepted once</p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t0_filter">
<span class="sig-name descname"><span class="pre">t0_filter</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t0_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter to apply to incoming datapoints</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t2_compute">
<span class="sig-name descname"><span class="pre">t2_compute</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel" title="ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel"><span class="pre">ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t2_compute" title="Permalink to this definition">¶</a></dt>
<dd><p>T2 units to trigger when transient is updated. Dependencies of tied
units will be added automatically.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t3_supervise">
<span class="sig-name descname"><span class="pre">t3_supervise</span></span><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.t3_supervise" title="Permalink to this definition">¶</a></dt>
<dd><p>T3 processes bound to this channel. These may be use templates, such as
<a class="reference internal" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3" title="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodicSummaryT3</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.check_tied_units">
<span class="sig-name descname"><span class="pre">check_tied_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_t2_units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_pass_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/AbsLegacyChannelTemplate.html#AbsLegacyChannelTemplate.check_tied_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.check_tied_units" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError if tied t2 units are present in t2_units but the requred t2 units are not present in t2_compute</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.get_units">
<span class="sig-name descname"><span class="pre">get_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">units</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_pass_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/AbsLegacyChannelTemplate.html#AbsLegacyChannelTemplate.get_units"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.AbsLegacyChannelTemplate.get_units" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>unit defintions (dict) that are subclass of the provided abstract class name.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.template.AbsLegacyChannelTemplate.</span></span><span class="sig-name descname"><span class="pre">T2UnitModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/AbsLegacyChannelTemplate.html#T2UnitModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.model.UnitModel.UnitModel</span></code></a></p>
<p>Precursor that ProcessMorpher can turn into a T2IngestModel</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel.ingest">
<span class="sig-name descname"><span class="pre">ingest</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel.ingest" title="Permalink to this definition">¶</a></dt>
<dd><p>Ingester options</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel.group">
<span class="sig-name descname"><span class="pre">group</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.AbsLegacyChannelTemplate.T2UnitModel.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter result codes that should trigger this T2. If not specified, T2
documents will be created in response to <em>any</em> passing alert.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.FilterModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.template.PeriodicSummaryT3.</span></span><span class="sig-name descname"><span class="pre">FilterModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/PeriodicSummaryT3.html#FilterModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.FilterModel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.FilterModel.t2">
<span class="sig-name descname"><span class="pre">t2</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.t3.T2FilterModel.T2FilterModel" title="ampel.model.t3.T2FilterModel.T2FilterModel"><span class="pre">ampel.model.t3.T2FilterModel.T2FilterModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><span class="pre">ampel.model.operator.AllOf.AllOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">T2FilterModel</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf"><span class="pre">ampel.model.operator.AnyOf.AnyOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">T2FilterModel</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.FilterModel.t2" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter based on T2 results</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.model.template.PeriodicSummaryT3.</span></span><span class="sig-name descname"><span class="pre">PeriodicSummaryT3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/model/template/PeriodicSummaryT3.html#PeriodicSummaryT3"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ampel.abstract.AbsProcessTemplate.AbsProcessTemplate</span></code></p>
<p>A T3 process that selects stocks modified since its last invocation, and
supplies them, to a sequence of AbsT3Units.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Process name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.schedule">
<span class="sig-name descname"><span class="pre">schedule</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>one or more <a class="reference external" href="https://schedule.readthedocs.io/en/stable/">schedule</a>
expressions, e.g: <code class="docutils literal notranslate"><span class="pre">every().day.at(&quot;15:00&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">every(42).minutes</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>all times are are expressed in UTC</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AllOf.AllOf" title="ampel.model.operator.AllOf.AllOf"><span class="pre">ampel.model.operator.AllOf.AllOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.AnyOf.AnyOf" title="ampel.model.operator.AnyOf.AnyOf"><span class="pre">ampel.model.operator.AnyOf.AnyOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.operator.OneOf.OneOf" title="ampel.model.operator.OneOf.OneOf"><span class="pre">ampel.model.operator.OneOf.OneOf</span></a><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel selection.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.tag">
<span class="sig-name descname"><span class="pre">tag</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[Dict[Literal[with,</span> <span class="pre">without],</span> <span class="pre">Union[int,</span> <span class="pre">str,</span> <span class="pre">Dict,</span> <span class="pre">ampel.model.operator.AllOf.AllOf[typing.Union[int,</span> <span class="pre">str]],</span> <span class="pre">ampel.model.operator.AnyOf.AnyOf[typing.Union[int,</span> <span class="pre">str]],</span> <span class="pre">ampel.model.operator.OneOf.OneOf[typing.Union[int,</span> <span class="pre">str]]]]]</span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Stock tag selection.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.load">
<span class="sig-name descname"><span class="pre">load</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#ampel.model.t3.LoaderDirective.LoaderDirective" title="ampel.model.t3.LoaderDirective.LoaderDirective"><span class="pre">ampel.model.t3.LoaderDirective.LoaderDirective</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Documents to load. If a string, should refer to an entry in the
<code class="docutils literal notranslate"><span class="pre">alias.t3</span></code> config section. See <a class="reference internal" href="structure.html#t3-directive-load"><span class="std std-ref">load</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#ampel.model.template.PeriodicSummaryT3.FilterModel" title="ampel.model.template.PeriodicSummaryT3.FilterModel"><span class="pre">ampel.model.template.PeriodicSummaryT3.FilterModel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional stock filters.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.complement">
<span class="sig-name descname"><span class="pre">complement</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.complement" title="Permalink to this definition">¶</a></dt>
<dd><p>Complement stages. See <a class="reference internal" href="structure.html#t3-directive-complement"><span class="std std-ref">complement</span></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.run">
<span class="sig-name descname"><span class="pre">run</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://ampelproject.github.io/Ampel-interface/api.html#ampel.model.UnitModel.UnitModel" title="(in ampel-interface v0.8)"><span class="pre">ampel.model.UnitModel.UnitModel</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.model.template.PeriodicSummaryT3.PeriodicSummaryT3.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Units to run. See <a class="reference internal" href="structure.html#t3-directive-run-execute"><span class="std std-ref">execute</span></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="odds-and-ends">
<h2>Odds and ends<a class="headerlink" href="#odds-and-ends" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ampel.log.AmpelLogger.AmpelLogger">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.log.AmpelLogger.</span></span><span class="sig-name descname"><span class="pre">AmpelLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handlers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">console</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/log/AmpelLogger.html#AmpelLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="ampel.log.AmpelLogger.AmpelLogger.get_logger">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_refresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/log/AmpelLogger.html#AmpelLogger.get_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.log.AmpelLogger.AmpelLogger.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates or returns an instance of <code class="xref py py-obj docutils literal notranslate"><span class="pre">AmpelLogger</span></code>
that is registered in static dict ‘loggers’ using the provided name as key.
If a logger with the given name already exists, the existing logger instance is returned.
If name is None, unique (int) name will be generated
:param <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>: passed to constructor</p>
<p>Typical use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">AmpelLogger</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ampel.log.AmpelLogger.AmpelLogger" title="ampel.log.AmpelLogger.AmpelLogger"><code class="xref py py-class docutils literal notranslate"><span class="pre">AmpelLogger</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">ampel.core.AmpelRegister.</span></span><span class="sig-name descname"><span class="pre">AmpelRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">autoload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister" title="Permalink to this definition">¶</a></dt>
<dd><p># noqa: E101</p>
<p>An ampel register file is made of three parts: signature, header and content</p>
<p>1) The file signature is encoded in the first 11 bytes.
The signature contains the header’s length and size (3 bytes each)</p>
<p>2) A BSON encoded dict is saved in the next x bytes, refered to as the file’s header.
The header can be updated independently of the register’s content.
The size of the header is customizable during file creation.</p>
<p>3) The register’s content is usually a compressed structure (zip, bzip or xz)
which stores information in binary format. Compression can be turned off if so whished.
(The size of a register containing 10 millions alert ids [8 bytes] and filter
return code [1 byte] can be reduced from ~90MB to ~50MB using gzip with default settings).</p>
<ul class="simple">
<li><p>Registers can be re-opened and appended</p></li>
<li><p>Header content can be accessed or updated independently of the register’s content.</p></li>
<li><p>Header updates are fast if enough space was reserved for updates in the first place.</p></li>
<li><p>Header size can be increased afterwards at the cost of having to rewrite the entire file once.
This happens automatically when needed.</p></li>
<li><p>Logging read and write access to the register content into the register header is supported</p></li>
<li><p>Registers can be capped (based on max content length or max number of run ids).
Once the limit is reached, the full register is renamed and a new one is created.</p></li>
</ul>
<p>Note: the module ampel.util.register contains tools to manually change ampel registers, such as:
<cite>get_header_content</cite>, <cite>open_file_and_write_header</cite> and <cite>rescale_header</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_base</strong> – the base folder path where to create/read register files.</p></li>
<li><p><strong>path_extra</strong> – an optional additional folder path (or paths) to be appended to <cite>path_base</cite>.</p></li>
<li><p><strong>full_path</strong> – when provided, all path building options will be ignored and a new
file handle will be opened using the provided full_path</p></li>
<li><p><strong>file_handle</strong> – if you provide a file handle to a register file (parameter file handle),
it will be used and all path options will be ignored.</p></li>
<li><p><strong>file_cap</strong> – <p>registers can be capped, typically based on a maximum number of blocks.
When access to a full register is requested, the original file is renamed and a new register is created.
During files renames, an index is appended (suffix) to the original file name.
The current (newest) register file always comes without index suffix.
This index is saved into the current register header.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span> <span class="p">(</span><span class="n">current</span> <span class="o">-</span> <span class="n">newest</span><span class="p">)</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="o">.</span><span class="mi">1</span> <span class="p">(</span><span class="n">first</span> <span class="n">renamed</span> <span class="n">register</span> <span class="o">-</span> <span class="n">oldest</span><span class="p">)</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="o">.</span><span class="mi">2</span>
<span class="n">ampel_register</span><span class="o">.</span><span class="n">bin</span><span class="o">.</span><span class="n">gz</span><span class="o">.</span><span class="mi">3</span> <span class="p">(</span><span class="n">second</span> <span class="n">newest</span><span class="p">)</span>
</pre></div>
</div>
<p>Note1: file renames occur during the opening procedure of registers, no check is performed during the filling of registers
once a register is opened. A register can thus grow beyond the defined limit as long as a process keeps it open.</p>
</p></li>
</ul>
</dd>
</dl>
<p>Limitations:</p>
<ul class="simple">
<li><p>The maximum space reservable for the header is 2**24 bytes, i.e ~16MB.</p></li>
<li><p>integers cannot exceed 2**63 bits. Should you need to save bigger numbers,
please use the methods bindata_to_int, int_to_bindata from module ampel.util.bson</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new_header_size</strong> – <p>either None, or an integer or a string (please read the note above).</p>
<ul>
<li><p>None or 0: the header block size will equal the header encoded length. Choose this option if
the header is not meant to be updated later. Otherwise, updates will only be possible if the header size
does not grow (note that there is a margin allowed since header exceeding the limit are automatically
compressed using zlib and written to disk if the size condition is then fullfilled).</p></li>
<li><p>integer number: the header will be allocated the specified number of bytes (for example 4096).</p></li>
<li><p>a string: refers to a ‘header margin’ and must start with the character ‘+’.
This option can save space in some circumstances. The header space allocated for the header will equal
the length of the initial header (including all provided options such as <cite>header_extra</cite>) to which
the specified header margin will be added. For example, ‘+1024’ means that 1024 bytes will be
allocated additionally to the initial header lengths for future updates. If the initial header length
is 100 bytes, then a header block of 1124 bytes will be created.</p></li>
</ul>
</p></li>
<li><p><strong>header_extra</strong> – any extra to be included in the header under the key ‘extra’ (must be bson encodable)</p></li>
<li><p><strong>header_extra_base</strong> – any extra to be included in the header at root depth (must be bson encodable)</p></li>
<li><p><strong>header_update_anyway</strong> – if no update to the register is made, the default setting is that the
header is not updated. This settings forces header updates. For example, you might want
to save all run ids into the header whether or not they changed the content of the register.</p></li>
<li><p><strong>header_log_accesses</strong> – <p>if True, timestamps will be recorded each time the register is opened/closed
along with the amount of new blocks appended to the register.</p>
<p>Note 1: parameter <cite>new_header_size</cite> must be set when using this value.
Note 2: see docstring of paramter <cite>header_update_anyway</cite> that affects the behavior of this parameter.</p>
<p>In the following example, <cite>header_log_accesses</cite> is responsible for creating/updating the key ‘updated’:</p>
</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>“ts”: {</dt><dd><blockquote>
<div><p>“created”: 1590506868.3880599,
“updated”: [</p>
<blockquote>
<div><p>[1590506868.3880599, 1590509029.389, 1200],
[1590507152.079873, 1590507295.080478, 2300]</p>
</div></blockquote>
</div></blockquote>
<dl class="simple">
<dt>]</dt><dd><p>}</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError, FileNotFoundError</p>
</dd>
</dl>
<ul class="simple">
<li><p>if neither <cite>file_handle</cite>, <cite>full_path</cite>, <cite>path_base</cite> exist.</p></li>
<li><p>if read access to a non-existing file is requested</p></li>
<li><p>if the target file is not a register file (existing empty files are ok)</p></li>
<li><p>if the ‘struct’ parameter of sub-class of this class differs with the values registered
in the file’s header (this behavior can be deactivated from parameter <cite>on_exist_check</cite>)</p></li>
<li><p>during file renames (in case capped registers are used) if the target file already exists</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_base">
<span class="sig-name descname"><span class="pre">path_base</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_base" title="Permalink to this definition">¶</a></dt>
<dd><p>save files in &lt;path_base&gt;/&lt;file&gt;</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_extra">
<span class="sig-name descname"><span class="pre">path_extra</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_extra" title="Permalink to this definition">¶</a></dt>
<dd><p>save files in &lt;path_base&gt;/&lt;path_extra(s)&gt;/&lt;file&gt;</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.file_prefix">
<span class="sig-name descname"><span class="pre">file_prefix</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.file_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>prefix for each file</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.path_full">
<span class="sig-name descname"><span class="pre">path_full</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.path_full" title="Permalink to this definition">¶</a></dt>
<dd><p>ignore all other path options and use this file path</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.file_handle">
<span class="sig-name descname"><span class="pre">file_handle</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">BinaryIO</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.file_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>use existing file handle</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.compression">
<span class="sig-name descname"><span class="pre">compression</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">gz</span><span class="p"><span class="pre">,</span> </span><span class="pre">bz2</span><span class="p"><span class="pre">,</span> </span><span class="pre">xz</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">'gz'</span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.compression" title="Permalink to this definition">¶</a></dt>
<dd><p>compression scheme</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.compress_level">
<span class="sig-name descname"><span class="pre">compress_level</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.compress_level" title="Permalink to this definition">¶</a></dt>
<dd><p>compression level</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.check_rename">
<span class="sig-name descname"><span class="pre">check_rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.check_rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.check_rename" title="Permalink to this definition">¶</a></dt>
<dd><p>override if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.onload_update_header">
<span class="sig-name descname"><span class="pre">onload_update_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.onload_update_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.onload_update_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Override if you need to update the header of an existing register.
Ex: BaseAlertRegister adds the current run id</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.get_file_path">
<span class="sig-name descname"><span class="pre">get_file_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.get_file_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.get_file_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raise</dt>
<dd class="field-odd"><p>errors if sub-directories cannot be created</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.get_file_name">
<span class="sig-name descname"><span class="pre">get_file_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.get_file_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.get_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>override if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.check_header">
<span class="sig-name descname"><span class="pre">check_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.check_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.check_header" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError is raised on mismatch between this instance value</p>
</dd>
</dl>
<p>and the header value for the provided key</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.register_file_access">
<span class="sig-name descname"><span class="pre">register_file_access</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_this_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.register_file_access"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.register_file_access" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]) – use provided header rather than self.header[‘payload’]</p></li>
<li><p><strong>use_this_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]) – use provided time rather than time.time()</p></li>
<li><p><strong>new_blocks</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – None (default) when register is opened, 0 or an integer when register is closed</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.gen_new_header">
<span class="sig-name descname"><span class="pre">gen_new_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.gen_new_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.gen_new_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new header and create instance variable self.header to reference it.
:rtype: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>
:returns: bson encoded bytes representing the generated header
:raises: ValueError if the generated header size exceeds user-provided bound parameters</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampel.core.AmpelRegister.AmpelRegister.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_outer_fh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ampel/core/AmpelRegister.html#AmpelRegister.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ampel.core.AmpelRegister.AmpelRegister.close" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>close_outer_fh</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – whether principal file handle should be closed</p></li>
<li><p><strong>update_header</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – possible overidde of default settings</p></li>
</ul>
</dd>
</dl>
<p>(aimed for admins working with command line)</p>
</dd></dl>

</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ampel.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="structure.html"
                        title="previous chapter">Structure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="legacy.html"
                        title="next chapter">Porting contrib projects from v0.6</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="legacy.html" title="Porting contrib projects from v0.6"
             >next</a> |</li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ampel-core 0.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Ampel-core</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2021, Ampel Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.2.
    </div>
  </body>
</html>